/*
 * OpenTag, a tag deployment platform
 * Copyright 2011-2012, QuBit Group
 * http://opentag.qubitproducts.com
 */

try{(function(){(function(){Function.prototype.bind=Function.prototype.bind||function(j){var k=this;return function(){return k.apply(j,arguments)}}}());var c={__anonymous__:true};var a=null;try{a=(false||eval)("this")||(function(){return this}())}catch(h){}c=a;var f=c.qubit||{};if(!c.qubit){c.qubit=f}f.VERSION="1.1.4";try{module.exports=c}catch(h){}var d=function(){};var b;(function(){function k(){}k.global=function(){return a};k.globalNamespace=function(p,m,n,o){return j(p,m,n,o,true)};k.namespace=function(p,m,n,o){return j(p,m,n,o,false)};function j(w,t,p,v,r){var m=w.split("."),o=k.NAMESPACE_BASE||c,s=null,u=null,n;if(r){o=a}var q=o;o=p||o;for(n=0;n<m.length-1;n+=1){s=o;u=m[n];o[u]=o[u]||{};o=o[u]}s=o;u=m[m.length-1];if(a.TAGSDK_NS_OVERRIDE){v=false}if(t!==undefined){if(s[u]===undefined||!v){s[u]=t}}else{s[u]=s[u]||{}}return{root:q,object:s}}k.clazz=function(r,m,q,o,n){k.namespace(r,m,o,true);if(typeof(q)==="function"){m.superclass=q;m.prototype=new m.superclass(n)}var p=r.split(".");if(m.prototype){m.prototype.CLASS_NAME=p[p.length-1];p.splice(p.length-1,1);m.prototype.PACKAGE_NAME=p.join(".")}else{m.STATIC_NAME=p[p.length-1];p.splice(p.length-1,1);m.PACKAGE_NAME=p.join(".")}return m};k.clazz("qubit.Define",k)}());(function(){var n="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@'%./:<>?[\"]^_`{|}~\\;=";var m={};for(var k=0;k<n.length;k++){m[n.charAt(k)]=k}function j(o){}f.Define.clazz("qubit.Cookie",j);j.cookieAlphabet=n;j.cookieAlphabetMap=m;j.decode=function(o){return unescape(o)};j.encode=function(o){return escape(o)};j.set=function(q,t,v,s,u){var o;if(v){var p=new Date();p.setTime(p.getTime()+(v*24*60*60*1000));o="; expires="+p.toGMTString()}else{o=""}if(!u){q=j.encode(q);t=j.encode(t)}var r=q+"="+t+o+"; path=/;";if(s){r+=" domain="+s}document.cookie=r};j.get=function(q,t){var p=q+"=";var u=document.cookie.split(";");for(var s=0;s<u.length;s++){var o=u[s];while(o.charAt(0)===" "){o=o.substring(1,o.length)}if(o.indexOf(p)===0){var r=o.substring(p.length,o.length);if(!t){r=j.decode(r)}return r}}return null};j.getAllForName=function(r,o){if(!r){return[]}var q=r+"=";var v=document.cookie.split(";");var u=[];for(var t=0;t<v.length;t++){var p=v[t];while(p.charAt(0)===" "){p=p.substring(1,p.length)}if(p.indexOf(q)===0){var s=p.substring(q.length,p.length);if(o){s=j.decode(s)}u.push(s)}}return u};j.getAll=function(o){var u=document.cookie.split(";");var t=[];for(var s=0;s<u.length;s++){var q=u[s];while(q.charAt(0)===" "){q=q.substring(1,q.length)}var p=q.substring(0,q.indexOf("="));var r=q.substring(p.length+1,q.length);if(o){r=j.decode(r)}t.push([p,r])}return t};j.rm=function(o,p){j.set(o,"",-1,p)}})();(function(){var p=f.Define;function v(){}var j=p.global();p.clazz("qubit.opentag.Utils",v);v.global=p.global;v.namespace=p.namespace;v.clazz=p.clazz;v.getObjectUsingPath=function(D,B){B=B||j;var C=D.split(".");for(var A=0;A<C.length;A++){if(B&&C[A]){B=B[C[A]]}}return B};v.variableExists=function(A){return(A!==undefined)&&(A!==null)};v.ANON_VARS=[];v.getAnonymousAcessor=function(B){var A=v.indexInArray(B,v.ANON_VARS);if(A===-1){A=t(B)}return"qubit.opentag.Utils.ANON_VARS["+A+"]"};function t(A){return v.addToArrayIfNotExist(v.ANON_VARS,A)}function o(A){return A.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}v.replaceAll=function(A,C,B){return A.replace(new RegExp(o(C),"g"),B)};v.secureText=function(A){if(typeof(A)!=="string"){A+=""}A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");return A};v.getUrl=function(){return document.location.href};v.getQueryParam=function(H){var C,D,G,B,F,A,E;B=v.getUrl();if(B.indexOf("?")>0){A=B.substring(B.indexOf("?")+1).split("&");for(C=0,D=A.length;C<D;C+=1){F=A[C];if(F.indexOf("=")>0){E=F.split("=");if((E.length===2)&&(E[0]===H)){return E[1]}}}}return null};v.getElementValue=function(A){var B=document.getElementById(A);if(B){return B.textContent||B.innerText}return null};var q=[];function r(B,D){var A=q.length;for(var C=0;C<A;C++){if(B===q[C][0]){return q[C][1]}}q[q.length]=[B,D];return false}v.objectCopy=function(C,A){A=A||{};var B=w(C,A,A.maxDeep);q=[];return B};function w(M,J,L,G,I){var P=false,H=false,F=false,E=false,B=false,N=false,K=false;if(J){B=!!J.all;P=B||J.nodes;E=B||J.win;H=B;K=!!J.emptyForMaxDeep;F=J.noFunctions&&!B;if(J.noOwn!==undefined){H=!!J.noOwn}if(J.noFunctions!==undefined){F=!!J.noFunctions}if(J.win!==undefined){E=!!J.win}if(J.nodes!==undefined){P=!!J.nodes}N=!!J.copyReference}if(L!==undefined&&!L){if(K){return}return M}else{if(L!==undefined){L--}}if(!M||!(M instanceof Object)){return M}if(!P){try{if(M instanceof Node){return M}}catch(O){if(M instanceof ActiveXObject&&M.nodeType!==undefined){return M}}if(M===document){return M}}if(!E){if(M===j){return M}}var Q=(M instanceof Array)?[]:{};if(M instanceof Date){Q=new Date(M)}if(!F&&M instanceof Function){var A=String(M).replace(/\s+/g,"");if((A.indexOf("{[nativecode]}")+14)===A.length){Q=function(){return M.apply(I||this,arguments)}}else{Q=function(){return M.apply(this,arguments)}}}if(G===undefined){q=[];G=0}var D=r(M,Q);if(D){return D}var R;if(Q instanceof Array){for(R=0;R<M.length;R++){if(M[R]===M[R]){Q[Q.length]=w(M[R],J,L,G+1,M)}else{Q[Q.length]=M[R]}}}else{R=0;for(var C in M){if(H||M.hasOwnProperty(C)){if(M[C]===M[C]){Q[C]=w(M[C],J,L,G+1,M)}else{Q[C]=M[C]}}R++}}if(J.proto){Q.prototype=w(M.prototype,J,L,G+1,M)}if(N){Q.___copy_ref=M}return Q}var n=[];function x(B,A){for(var C=0;C<A&&C<n.length;C++){if(B===n[C]){return true}}return false}v.traverse=function(B,C,A){u(B,C,A)};function u(G,M,I,C,N,A,L){I=I||{};if(I.hasOwn===undefined){I.hasOwn=true}if(I.objectsOnly&&!(G instanceof Object)){return}if(I.maxDeep!==undefined&&!I.maxDeep){return}else{if(I.maxDeep!==undefined){I.maxDeep--}}if(!I||!I.nodes){try{if(G instanceof Node){return}}catch(B){if(G instanceof ActiveXObject&&G.nodeType!==undefined){return}}}if(G===j){return}if(C===undefined){n=[];C=0}if(x(G,C)){return}n[C]=G;N=N||G;if(N&&A&&(N[A]!==N[A])){return}var K=M(G,N,A,L);if(K){return}var F=0;var H="";for(var E in G){if(!I.hasOwn||(G.hasOwnProperty(E))){try{var D=G[E];if(I.track){H=L?(L+"."+E):E}u(D,M,I,C+1,N,E,H)}catch(J){}}F++}}v.prepareQuotedString=function(A){if(typeof(A)==="string"){return'"'+(A.replace(/\"/g,'\\"'))+'"'}else{return A}};v.expressionToFunction=function(C,A){A=A||"";var B="function ("+A+") {"+C+"}";return v.gevalAndReturn(B).result};v.defineClass=function(E,C,B,G){var I=E.split(".");var H=I[I.length-1];var F;var D=["clazz = ","(function ",H,"() {","  if (",E,"._CONSTRUCTOR) {","    return ",E,"._CONSTRUCTOR.apply(this, arguments);","  } else {","    if (",E,".superclass) {","      return ",E,".superclass.apply(this, arguments);","    }","  }","})"].join("");eval(D);var J=B.CONSTRUCTOR;F._CONSTRUCTOR=J;F.superclass=C;p.clazz(E,F,C,G);for(var A in B){if(B.hasOwnProperty(A)&&A!=="CONSTRUCTOR"){F.prototype[A]=B[A]}}return F};v.keys=function(B){if(B instanceof Object){if(Object.keys){return Object.keys(B)}var A=[];for(var C in B){if(B.hasOwnProperty(C)){A[A.length]=C}}return A}else{throw"keys() called on non-object!"}};v.getSrcElement=function(A){var B;A=A||window.event;if(A.srcElement){B=A.srcElement}else{if(A.target){B=A.target}}return B};v.addToArrayIfNotExist=function(D,C){var A=0,B=false;for(;A<D.length;A+=1){if(D[A]===C){B=true;break}}if(!B){D[D.length]=C;A=-1}return A};v.indexInArray=function(D,C){var A=0,B=false;for(;A<D.length;A++){if(D[A]===C){B=true;break}}return B?A:-1};v.removeFromArray=function(D,C){var A=0,B=0;for(;A<D.length;A+=1){if(D[A]===C){D.splice(A,1);B++}}return B};v.addClass=function(D,A){var C;try{D.classList.add(A)}catch(B){if(D.className===null){D.className=A;return}C=D.className.split(" ");v.addToArrayIfNotExist(C,A);D.className=C.join(" ")}};v.removeClass=function(D,A){var C;try{D.classList.remove(A)}catch(B){if(D.className===null){D.className="";return}C=D.className.split(" ");v.removeFromArray(C,A);D.className=C.join(" ")}};var s="try{this.qubitopentagutilsgevalandreturn__var_test__=(";var z=");}catch(ex){this.qubitopentagutilsgevalandreturn__var_test__error = ex;}";
v.gevalAndReturn=function(E){var C=a;C.qubitopentagutilsgevalandreturn__var_test__=undefined;C.qubitopentagutilsgevalandreturn__var_test__error=undefined;E=s+E+z;v.geval(E);var B=C.qubitopentagutilsgevalandreturn__var_test__;var D=C.qubitopentagutilsgevalandreturn__var_test__error;try{C.qubitopentagutilsgevalandreturn__var_test__=b;C.qubitopentagutilsgevalandreturn__var_test__error=b;delete C.qubitopentagutilsgevalandreturn__var_test__;delete C.qubitopentagutilsgevalandreturn__var_test__error}catch(A){}return{result:B,error:D}};v.trim=function(A){try{return String(A).trim()}catch(B){return String(A).replace(/^\s+|\s+$/g,"")}};v.setIfUnset=function(A,B){if(A&&B){for(var C in B){if(B.hasOwnProperty(C)&&!A.hasOwnProperty(C)){A[C]=B[C]}}}};v.geval=function(A){if(window&&window.execScript){return window.execScript(A)}else{return(function(){return j["eval"].call(j,A)}())}};var m=[];var y=false;v.bodyReady=function(C){if(y){if(C){C()}return true}y=!!(document.body&&document.readyState==="complete");if(y){for(var B=0;B<m.length;B++){try{m[B]()}catch(A){}}if(C){C()}}else{if(C){m.push(C)}}return y};var k=j.onload;j.onload=function(A){v.bodyReady();if(k){k(A)}}}());(function(){function k(m){if(m){this._rate=m.rate||10;this._smallestRate=-1;if(m.start){this.startPooling()}this.config=m}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}f.Define.clazz("qubit.opentag.Timer",k);k.prototype.timers=[];k.prototype.startPooling=function(m){if(m&&this.config.dynamic){if(this._smallestRate<0||this._smallestRate>m){this._smallestRate=Math.min(Math.floor(m/2),1500)}}if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};k.prototype._pool=function(){this.maxFrequent(function(){var n="";if(this.config&&this.config.name){n="["+this.config.name+"]"}},5000,this._lck_obj);this.callTimers();if(this.timers.length!==0){var m=(this._smallestRate>this._rate)?this._smallestRate:this._rate;setTimeout(this._binded_pool,m)}else{this.started=false;this._smallestRate=-1}};k.prototype.callTimers=function(){this.lastCalled=new Date().valueOf();for(var n=0;n<this.timers.length;n++){var p=this.timers[n];var m=new Date().valueOf();if(m>=p.time){try{p.execute()}catch(o){}this.timers.splice(n,1);--n}}};k.prototype.cancellAll=function(){this.timers=[]};k.prototype.setRate=function(m){this._rate=m};k.prototype.maxFrequent=function(n,p,m){if(!m){n.__maxFrequent__timer_opentag_qubit_=n.__maxFrequent__timer_opentag_qubit_||{};m=n.__maxFrequent__timer_opentag_qubit_}var o=m.____last__timed__max__frequent____;if(!o||(new Date().valueOf()-o)>p){o=new Date().valueOf();m.____last__timed__max__frequent____=o;n()}};k.prototype.runIfNotScheduled=function(n,o,m){if(m.__lastRun__&&(new Date().valueOf()<(o+m.__lastRun__))){return this.schedule(n,o,m)}else{m.__lastRun__=new Date().valueOf();n();return true}};k.prototype.schedule=function(n,o,m){if(m.___scheduled___){return false}else{m.___scheduled___=new Date().valueOf();this.setTimeout(function(){m.___scheduled___=false;m.__lastRun__=new Date().valueOf();n()},o);return true}};var j=1;k.prototype.setTimeout=function(m,n){var o={id:j++,time:new Date().valueOf()+(+n),execute:m};this.timers.push(o);this.startPooling(n);return o};k.prototype.setInterval=function(n,o){var m=setInterval(n,o);this.inervals.push(m);return m}})();(function(){f.Define.namespace("qubit.opentag.Timed",new f.opentag.Timer({rate:37,dynamic:true}));var j=f.opentag.Timed;j.tillTrue=function(o,n,m){var k=function(){if(!o()){j.setTimeout(k,m||33)}else{n()}};k()}})();var g={};g.html=g.html||{};g.html.fileLoader={};g.html.fileLoader.load=function(j,t,v,r,o,p){var k,m,s,n,q;q=false;n=function(w){return function(){if(!q){q=true;if(w&&!s){s={url:document.location.href}}v(j,s,w)}}};try{if(t){m=t(j)}}catch(u){m=false;v(j,"Exception loading pre",true)}finally{if(m!==false){k=g.html.fileLoader.createScriptEl(j,o,false,p);if(v){k.onload=n(false);k.onerror=n(true);k.onreadystatechange=function(){if((this.readyState==="complete")||(this.readyState==="loaded")){setTimeout(function(){n(false)()},1)}}}if(!r){r=window.document.getElementsByTagName("head")[0]}r.appendChild(k)}}};g.html.fileLoader.createScriptEl=function(o,n,p,j){var k,m=document.createElement("script");m.type="text/javascript";m.src=g.html.fileLoader.tidyUrl(o)+(p?("?"+new Date().getTime()):"");if(n!==false){m.async="true";m.defer="true"}else{m.async="false";if(m.async!==false){m.async=false}m.defer="false"}for(k in j){if(j.hasOwnProperty(k)){m.setAttribute(k,j[k])}}return m};g.html.fileLoader.tidyUrl=function(j){if(j.substring(0,5)==="http:"){return j}if(j.substring(0,6)==="https:"){return j}return"//"+j};(function(){var j=0;function k(m){this.config={order:0,include:true,name:"Filter-"+(j++),script:undefined,session:undefined};this.session=null;if(m){for(var n in m){if(m.hasOwnProperty(n)){this.config[n]=m[n]}}if(m.session){this.setSession(m.session)}}}f.Define.clazz("qubit.opentag.filter.BaseFilter",k);k.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};k.prototype.reset=function(){this.enable()};k.prototype.disable=function(){this.config.disabled=true};k.prototype.enable=function(){this.config.disabled=false};k.prototype.match=function(){return true};k.prototype.setSession=function(m){this.session=m};k.prototype.getSession=function(){return this.session};k.prototype.getState=function(){var m=k.state.PASS;if(this.config.disabled){return k.state.DISABLED}if(this.config.script){m=this.config.script.call(this,m)}if(isNaN(+m)){m=k.state.FAIL}this.lastState=+m;return m}}());(function(){var j=f.opentag.filter.BaseFilter;function k(n){var m={};if(n){for(var o in n){if(n.hasOwnProperty(o)){if(o==="customStarter"&&n[o]){this.customStarter=n[o]}else{if(o==="customScript"&&n[o]){this.customScript=n[o]}}m[o]=n[o]}}}k.superclass.call(this,m)}f.Define.clazz("qubit.opentag.filter.SessionVariableFilter",k,j);k.prototype.customStarter=function(o,n,m){n(false)};k.prototype.customScript=function(m){return true};k.prototype.match=function(){try{if(this._matchState===undefined){this._matchState=!!this.customScript(this.getSession())}return this._matchState}catch(m){return false}};k.prototype.runTag=function(m){if(!this._runTag){if(this.customStarter){this._runTag=true;this.customStarter(this.getSession(),function(n){this.lastRun=new Date().valueOf();if(n===true){m.run()}else{m.runOnce()}}.bind(this),m)}}};k.prototype.getState=function(n){if(n){this.setSession(n)}var m=k.superclass.prototype.getState.call(this);if(m===j.state.DISABLED){return j.state.DISABLED}if(m===j.state.PASS){if(this.customStarter){m=j.state.SESSION}}if(this.config.script){m=this.config.script.call(this,m,this.getSession())}this.lastState=m;return m};k.prototype.reset=function(){this._matchState=undefined;k.superclass.prototype.reset.call(this);this._runTag=undefined}}());g.html.GlobalEval={};g.html.GlobalEval.globalEval=function(k){if(window.execScript){window.execScript(k)}else{var j=function(){window["eval"].call(window,k)};j()}};g.html.HtmlInjector={};g.html.HtmlInjector.inject=function(j,t,r,m,p){var o,w,q,v,n,u,k;if(r.toLowerCase().indexOf("<script")>=0){q=document.createElement("div");q.innerHTML="a"+r;v=q.getElementsByTagName("script");n=[];for(o=0,w=v.length;o<w;o+=1){n.push(v[o])}k=[];for(o=0,w=n.length;o<w;o+=1){u=n[o];var x={attributes:g.html.HtmlInjector.getAttributes(u)};if(u.src){x.src=u.src}else{x.script=u.innerHTML}k.push(x);u.parentNode.removeChild(u)}if(q.innerHTML){if(q.innerHTML.length>0){q.innerHTML=q.innerHTML.substring(1)}}g.html.HtmlInjector.doInject(j,t,q);g.html.HtmlInjector.loadScripts(k,0,m,j)}else{q=document.createElement("div");q.innerHTML=r;g.html.HtmlInjector.doInject(j,t,q);if(m){m()}}};g.html.HtmlInjector.doInject=function(m,k,n){if(n.childNodes.length>0){var j=document.createDocumentFragment();while(n.childNodes.length>0){j.appendChild(n.removeChild(n.childNodes[0]))}if(k){g.html.HtmlInjector.injectAtStart(m,j)}else{g.html.HtmlInjector.injectAtEnd(m,j)}}};g.html.HtmlInjector.injectAtStart=function(k,j){if(k.childNodes.length===0){k.appendChild(j)
}else{k.insertBefore(j,k.childNodes[0])}};g.html.HtmlInjector.injectAtEnd=function(m,k,j){if(!j){j=1}if((m===document.body)&&(document.readyState!=="complete")&&(j<50)){setTimeout(function(){g.html.HtmlInjector.injectAtEnd(m,k,j+1)},100)}else{m.appendChild(k)}};g.html.HtmlInjector.loadScripts=function(o,m,k,j){var n,q,p=false;for(n=o.length;m<n;m+=1){q=o[m];if(q.src){p=true;break}else{g.html.GlobalEval.globalEval(q.script)}}if(p){g.html.fileLoader.load(q.src,null,function(){g.html.HtmlInjector.loadScripts(o,m+1,k,j)},j,false,q.attributes)}if(k&&(m===n)){k()}};g.html.HtmlInjector.getAttributes=function(o){var j,n,k,q,m,p={};if(o){k=o.attributes;n=k.length;for(j=0;j<n;j++){q=k[j].value;m=k[j].name.toLowerCase();if((q!=="")&&((m==="id")||(m==="class")||(m==="charset")||(m.substr(0,5)==="data-"))){p[m]=q}}return p}};(function(){var s=f.opentag.filter.BaseFilter;var A=g.html.HtmlInjector;var r=g.html.fileLoader;var j=f.opentag.filter.SessionVariableFilter;var w=function(){};f.Define.clazz("qubit.opentag.TagsUtils",w);var t=false;w.bodyLoaded=function(){if(t){return true}t=!!(document.body&&document.readyState!=="loading");return t};var x={};var v={SUCCESS:"success",FAIL:"failure",INIT:"not started"};w.loadScript=function(E){var D=E.url;var B=function(H,G,I){x[D].error=G;if(I){x[D].state=v.FAIL;E.onerror()}else{x[D].state=v.SUCCESS;E.onsuccess()}};if(x[D]){if(E.noMultipleLoad){return B(D,x[D].error,x[D].state===v.FAIL)}x[D].count+=1}else{x[D]={count:1,state:null}}var F=!E.async;var C=w.bodyLoaded();if(F&&C){}F=F&&!C;if(F){w.writeScriptURL(D,function(H,G){B(D,G,!H)})}else{r.load(D,false,B,E.node,E.async)}};var y=null;function m(){y=y||{write:document.write,writeln:document.writeln}}function o(){document.write=y.write;document.writeln=y.writeln;y=null}w.redirectDocumentWritesToArray=function(D,B){var C=D;m();document.write=function(E){C.push(E)};document.writeln=function(E){C.push(E)}};w.flushDocWritesArray=function(G,I,C,E,D){var B=I;if(B&&G){var F=G.splice(0,G.length);try{w.injectHTML(B,C,F.join("\n"),D||d);return true}catch(H){}}else{var J="Flushing location not found!";return false}if(D){D()}return true};w.unlockDocumentWrites=function(){if(y){o()}};var p=w.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var z={};f.Define.namespace(p,z,a);var q=0;w.writeScriptURL=function(B,H){var I="_"+q++;var F=p+"."+I;z[I]=function(K){if(K){H(false,"error while loading script "+B)}else{H(true)}z[I]=undefined;delete w.writeScriptURL.callbacks[I]};var J='if(this.readyState === "loaded" || this.readyState === "complete"){ try {'+F+"(true)} catch (ex) {}}";var E="try{"+F+"(false)}catch(ex){}";var C="try{"+F+"(true)}catch(ex){}";var D="scr",G;B=r.tidyUrl(B);G="<"+D+"ipt onload='"+E+"'  onerror='"+C+"' onreadystatechange='"+J+"' type='text/javascript'  src='"+B+"'></"+D+"ipt>";if(y){o();document.write(G);m()}else{document.write(G)}};w.writeScriptURL.callbacks={};var n=s.state.SESSION;var u=s.state.PASS;var k=s.state.FAIL;w.filtersState=function(I,C,S,G){I=I.sort(function(U,T){try{return T.config.order-U.config.order}catch(V){return 0}});var K=u;if(!I||(I.length===0)){return K}var M=null;var R=false;var F=false;var J=0;var B;var E;var H=[];var L;var D;for(var O=0;O<I.length;O++){L=I[O];L.setSession(C);if(L.match()){B=L.getState();if(B>0){if(J===0||J>B){J=B}}else{if(B===s.state.DISABLED){R=true}else{if(B===n){F=true;M=L;E=L;H.push(L)}else{M=L}}}}else{D=L}}var N=false;if(M===null){N=true;if(!R){K=k}else{K=u}}else{if(M.config.include){K=B}else{K=(B===u)?k:u}}if(J>0&&(K===u||N)){K=J}if(K===n||((K===u)&&F)){if(!E.config.include){return k}K=n;if(E instanceof j){if(G){for(var Q=0;Q<H.length;Q++){try{H[Q].runTag(S)}catch(P){H[Q].log.FINEST("trying custom starter failed:"+P)}}}}}if(S.config.dedupe&&K===u){if(D&&D instanceof j){S.sendDedupePing=true;K=k}}return K};w.injectHTML=function(C,B,D,E){return A.inject(C,(!B)?1:0,D,E||d)};w.getHTMLLocationForTag=function(B){var D;var C=B.prepareLocationObject(B.config.locationObject);switch(C){case"HEAD":D=document.getElementsByTagName("head")[0];break;case"BODY":D=document.body;break;default:if(C){D=document.getElementById(C)}else{D=document.body}}return D}})();(function(){var n=f.opentag.Utils;var j=0;function m(p){this.config={};this.parameters=null;if(p){this.uniqueId="BV"+j++;m.ALL_VARIABLES[this.uniqueId]=this;for(var q in p){this.config[q]=p[q]}if(p.value!==undefined){this.value=p.value}if(p.defaultValue!==undefined){this.defaultValue=p.defaultValue}var o=m.register(this);if(o&&o!==this){}return o}}f.Define.clazz("qubit.opentag.pagevariable.BaseVariable",m);m.ALL_VARIABLES={};m.pageVariables=[];m.register=function(o){if(o instanceof m){for(var p=0;p<m.pageVariables.length;p++){var q=m.pageVariables[p];if((o.constructor===q.constructor)&&(k(q.config,o.config))){return q}}m.pageVariables.push(o);return o}return null};function k(p,o){for(var s in o){var q=o[s];for(var r in p){if(p.hasOwnProperty(r)){if(p[r]!==q){return false}}}}return true}m.prototype.getValue=function(){return this.value};m.prototype.setValue=function(o){this.value=o};m.prototype.getDefaultValue=function(){return this.defaultValue};m.prototype.setDefaultValue=function(o){this.defaultValue=o};m.prototype.exists=function(o){var p=n.variableExists(this.getValue());if(o){p=p||n.variableExists(this.getDefaultValue())}return p};m.prototype.getRelativeValue=function(q,o){var p=this.getValue();if(!n.variableExists(p)){p=o}var r;if(q&&!n.variableExists(p)){r=this.getDefaultValue();if(n.variableExists(r)){p=r}}return p};m.prototype.replaceToken=function(s,q,p,r){var t=this.exists();var u=t?this.getValue():p;s="\\$\\{"+s+"\\}";if((r||(u instanceof Array))){var o;if(t){o=this.getValueAccessorString()}else{o=n.getAnonymousAcessor(u)}return q.replace(new RegExp(s,"g"),o)}else{return q.replace(new RegExp(s,"g"),u)}};m.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};m.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"}}());(function(){var k=f.opentag.Utils;var m=f.opentag.Timed;function j(n){this._lockExprObject={};j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.Expression",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){var o;var n;try{if(this.value.indexOf("[#]")===-1){var p=k.gevalAndReturn(this.value);o=p.result;this.failMessage=null;n=p.error}else{o=j.parseUVArray(this.value)}}catch(q){n=q}if(n){var r="could not read value of expression: \n"+this.value+"\nexact cause: "+n;if(this.failMessage!==r){this.failMessage=r}o=null}return o};j.parseUVArray=function(p){var q=p.split("[#]");var t=k.gevalAndReturn(q[0]).result;var s=[];var r=q[1];if(r.indexOf(".")===0){r=r.replace(".","")}for(var o=0;o<t.length;o++){var n=k.getObjectUsingPath(r,t[o]);s.push(n)}return s};j.prototype.replaceToken=function(p,o,n,q){if((this.getValue() instanceof Array)){q=true}return j.superclass.prototype.replaceToken.call(this,p,o,n,q)}}());(function(){var k=f.opentag.Utils;function j(m){j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.DOMText",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){return k.getElementValue(this.value)}}());(function(){var k=f.opentag.Timed;function j(m){j.superclass.apply(this,arguments);this._lockObject={}}f.Define.clazz("qubit.opentag.pagevariable.Cookie",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){var m=f.Cookie.get(this.value);k.maxFrequent(function(){}.bind(this),2000,this._lockObject);return m}}());(function(){var k=f.opentag.Utils;function j(m){j.superclass.apply(this,arguments)}f.Define.clazz("qubit.opentag.pagevariable.URLQuery",j,f.opentag.pagevariable.BaseVariable);j.prototype.getValue=function(){return k.getQueryParam(this.value)}}());(function(){var u=f.opentag.Utils;var w=f.opentag.TagsUtils;var s=f.opentag.Timed;var y=f.opentag.pagevariable.BaseVariable;var t=f.opentag.pagevariable.Expression;var v=f.opentag.pagevariable.DOMText;
var m=f.opentag.pagevariable.Cookie;var x=f.opentag.pagevariable.URLQuery;function k(){}f.Define.clazz("qubit.opentag.TagHelper",k);k.injectHTMLForLoader=function(H,G,E,B){var A=H.config;var C=(B!==undefined)?B:A.html;if(C){var z=(A.locationPlaceHolder==="END");var F=w.getHTMLLocationForTag(H);H.injectHTMLNotFinished=true;try{if(F){w.injectHTML(F,z,C,function(){H.injectHTMLNotFinished=false;if(G){try{G()}catch(I){}}}.bind(H))}else{if(E&&document.readyState==="loading"){document.write(C);H.injectHTMLNotFinished=false}else{H.injectHTMLFailed=new Date().valueOf()}}}catch(D){H.injectHTMLNotFinished=false;H.injectHTMLFailed=new Date().valueOf()}}};function o(z,D){var A=[];try{var E=z.parameters;if(E){for(var C=0;C<E.length;C++){if(E[C].variable===D){A.push(E[C])}}}}catch(B){}return A}k.getAllVariablesWithParameters=function(z){var F=z.getPageVariables();var C=[];for(var B=0;B<F.length;B++){var E=F[B];var D=o(z,E);for(var A=0;A<D.length;A++){C.push({parameter:D[A],variable:E})}}return C};var r={};k.allParameterVariablesReadyForTag=function(J,G){var A=G;var B=J.log;var H=true;var E=J.getPageVariables();for(var C=0;C<E.length;C++){var z=E[C];try{var I=o(J,z);var F=z.exists();if(!F&&A){if(I.length>0){F=!!I[0].defaultValue}F=F||z.exists(true)}if(!F){H=false;break}}catch(D){H=false;break}}return H};var n="2";var j="3";var q="4";var p="5";k.validateAndGetVariableForParameter=function(z){if(z.hasOwnProperty("variable")&&z.variable){z.variable=k.initPageVariable(z.variable)}else{if(z.uv){z.variable=new t({name:z.uv,value:z.uv})}else{z.variable=k.initPageVariable({value:undefined,empty:true})}}return z.variable};k.initPageVariable=function(z){if(!z||z instanceof y){return z}switch(z.type){case n:return new t(z);case j:return new x(z);case q:return new m(z);case p:return new v(z);case"EPRESSION":return new t(z);case"URL_PARAMETER":return new x(z);case"COOKIE_VALUE":return new m(z);case"DOM_VALUE":return new v(z);default:return new y(z)}}}());(function(){var m=f.Define;var k=f.opentag.Utils;function j(n){this.calls={}}j.prototype.on=function(n,o){this.calls[n]=this.calls[n]||[];return k.addToArrayIfNotExist(this.calls[n],o)};j.prototype.call=function(n){var q=this.calls[n];if(q){for(var p=0;p<q.length;p++){try{q[p]()}catch(o){}}}};j.prototype.remove=function(n,o){return k.removeFromArray(this.calls[n],o)};j.prototype.removeAll=function(n){var o=0;for(var p in this.calls){if(this.calls.hasOwnProperty(p)){o+=k.removeFromArray(this.calls[p],n)}}return o};m.clazz("qubit.Events",j)})();(function(){var p=f.opentag.Utils;var m=f.opentag.TagsUtils;var q=f.opentag.Timed;var k=f.opentag.TagHelper;var j=0;function o(r){this.urlsLoaded=0;this.urlsFailed=0;this.events=new f.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies){this._triggerLoadingAndExecution()}}.bind(this);this.config={name:"Tag-"+j++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForBody:false,noMultipleLoad:false,loadDependenciesOnLoad:false};this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=this.genericDependencies||[];if(r){if(!r.name){var u="Tag-"+j++;this.config.name=u}this.addState("INITIAL");for(var t in r){this.config[t]=r[t]}if(r.genericDependencies){this.genericDependencies=this.genericDependencies.concat(r.genericDependencies)}if(r.dependencies){var s=r.dependencies.concat(this.getDependencies());this.setDependencies(s)}if(r.PACKAGE){this._package=r.PACKAGE}this.onInit()}}f.Define.clazz("qubit.opentag.GenericLoader",o);o.prototype.onInit=d;o.prototype.LOADING_TIMEOUT=5*1000;o.prototype._executeScript=function(){var s=false;try{this.script();s=true}catch(r){this.addState("EXECUTED_WITH_ERRORS");this._onError(r)}finally{this._onExecute(s)}};o.prototype.getTimeout=function(){return this._getTimeout()};o.prototype._getTimeout=function(t){var u=+this.config.timeout;if(u!==-1&&this.getDependencies().length>0){var r=0;t=t||[];var w=this.getDependencies();var x=(p.indexInArray(t,this)!==-1);if(!x){t[t.length]=this;for(var s=0;s<w.length;s++){var v=w[s]._getTimeout(t);if(v>r){r=v}}if(r>0){u+=r}}else{return 0}}return u};o.prototype._onExecute=function(r){try{this.onExecute(r)}finally{if(r){this.events.call("success")}}};o.prototype.onExecute=d;o.prototype._flushDocWrites=function(s){var t=true;this._docWriteNotFlushed=false;try{var v=m.getHTMLLocationForTag(this);if(v&&this._securedWrites&&this._securedWrites.length>0){var r=(this.config.locationPlaceHolder==="END");t=m.flushDocWritesArray(this._securedWrites,v,r,this.log,s);if(t){this._docWriteFlushed=new Date().valueOf()}else{this._docWriteNotFlushed=new Date().valueOf()}}}catch(u){this._onError(u)}if(s){s()}if(this._securedWrites&&this._securedWrites.length>0){t=false;this._docWriteNotFlushed=new Date().valueOf()}return t};o.prototype.log=d;o.prototype.finished=function(){return !!this.runIsFinished};o.prototype.script=function(){};o.prototype.before=function(){this.beforeRun=new Date().valueOf();try{this.onBefore()}catch(r){this._onError(r)}};o.prototype.onBefore=d;o.prototype.after=function(s){this.afterRun=new Date().valueOf();try{this.onAfter(s)}catch(r){this._onError(r)}};o.prototype.onAfter=function(r){};o.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=new Date().valueOf();this.run()}else{}};o.CANCEL_ALL=false;o.prototype.runCounter=0;o.prototype.run=function(){if(this.cancelled||o.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning){return false}if(this.lastRun){this.reset()}this.lastRun=this.isRunning=new Date().valueOf();this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};o.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-new Date().valueOf();this.load();if(this._ignoreDeps){this.execute()}else{this.waitForDependenciesAndExecute()}return true};o.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=new Date().valueOf();var s=this.getDependencies();for(var r=0;r<s.length;r++){s[r].events.on("success",this._depLoadedHandler)}};o.prototype.dependenciesLoaded=function(){var t=this.getDependencies();for(var s=0;s<t.length;s++){if(t[s]!==this){var r=(+t[s].scriptExecuted)>0;if(!r){return false}}}return true};o.prototype._setTimeout=function(r,s){this._wasTimed=new Date().valueOf();return q.setTimeout(r,s)};o.prototype._handleCancel=function(){this.addState("CANCELLED");try{this.onCancel()}catch(r){this._onError(r)}};o.prototype.waitForDependenciesAndExecute=function(){if(this.cancelled){this._handleCancel();return}if(this.loadedDependencies){this.execute()}else{if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else{this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)}}};o.prototype.execute=function(){this._triggerExecution()};o.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted){return}var t=true;if(this.shouldWaitForDocWriteProtection()){t=false}else{if(!this._beforeEntered){this._beforeEntered=new Date().valueOf();var s=false;try{s=this.before()}catch(r){this._onError(r)}if(s){this._markFailure();this._markFinished();return}}t=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted){return}if(this.unexpectedFail){t=true}if(!t){this._setTimeout(this._triggerExecution.bind(this),30)}else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail){this._markFailure()}else{this.scriptExecuted=new Date().valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{if(!this.afterRun){this.afterRun=new Date().valueOf();this.after(this.scriptExecuted>0)
}}this._flushDocWrites();this._markFinished()}};o.prototype._markFailure=function(){this.scriptExecuted=-(new Date().valueOf());this.addState("FAILED_TO_EXECUTE")};o.prototype._markFinished=function(){this.runIsFinished=new Date().valueOf();this.isRunning=false;if(o.LOCK_DOC_WRITE===this){this._flushDocWrites();m.unlockDocumentWrites();o.LOCK_DOC_WRITE=false}this.onFinished(true)};o.prototype.onFinished=d;o.prototype.onCancel=d;o.prototype.onFinished=d;o.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite()){if(!o.LOCK_DOC_WRITE){o.LOCK_DOC_WRITE=this;this._secureWriteAndCollectForExecution()}else{if(o.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed){this._lockedDocWriteInformed=new Date().valueOf()}return true}}}return false};o.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};o.prototype.loadExecutionURLsAndHTML=function(r){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed){this._loadExecutionURLsAndHTMLInformed=true}this._triggerURLsLoading(r);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed){}return true}}}return false};o.prototype._triggerURLsLoading=function(r){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,r)}};o.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.config.html){this._injectHTMLTriggered=true;this.injectHTML()}};o.prototype.STATE={INITIAL:0,STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};o.prototype.addState=function(s){if(this.STATE.hasOwnProperty(s)){this.state=(this.state|this.STATE[s]);try{this.onStateChange(s)}catch(r){this._onError(r)}}};o.prototype.onStateChange=d;o.prototype.cancel=function(){this.cancelled=new Date().valueOf()};o.prototype.state=o.prototype.STATE.INITIAL;o.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=new Date().valueOf();this.onAllDependenciesLoaded()};o.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];m.redirectDocumentWritesToArray(this._securedWrites,this.log)}};function n(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=new Date().valueOf();if(this.allDependenciesLoaded()){this._markLoadedSuccesfuly()}else{if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=new Date().valueOf();if(this.allDependenciesLoaded(true)){this._markLoadedSuccesfuly()}else{this.addState("TIMED_OUT");this.loadingDependenciesFailed=new Date().valueOf();this._triggerOnLoadTimeout()}}else{this.waitForDependenciesFinished=false;this._setTimeout(n.bind(this),75)}}if(!this.waitForDependenciesFinished){}else{this.addState("LOADED_DEPENDENCIES")}}o.prototype.allDependenciesLoaded=function(s,r){return this.getDependenciesToBeLoaded(s,r).length===0};o.prototype.getDependenciesToBeLoaded=function(x,s){var w=s||[];if(!this.injectionLocationReady()){w.push("injection location")}var u;var y=this.getDependencies();for(u=0;u<y.length;u++){if(y[u]!==this){var t=(+y[u].scriptExecuted)>0;if(!t){var r=y[u].config?y[u].config.name:"anonymous";w.push("dependant Tag with name -> "+r)}}}for(u=0;u<this.genericDependencies.length;u++){var v=this.genericDependencies[u](this);if(!v){w.push("this.genericDependencies["+u+"] (index: "+u+")")}}if(w!==""){}return w};o.prototype.docWriteAsksToWaitForBody=function(){return !!(this.delayDocWrite&&this.config.usesDocumentWrite)};o.prototype.injectionLocationReady=function(){if(this.docWriteAsksToWaitForBody()&&!p.bodyReady()){return false}if(this.config.dontWaitForBody){return true}if(!this.isLoadingAsynchronously()){return true}return !!m.getHTMLLocationForTag(this)};o.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0){return false}return(new Date().valueOf()-this.timeoutCountdownStart)>this.getTimeout()};o.prototype.loadDependencies=function(){this._loadDependencies()};o.prototype.getDependencies=function(){return this.dependencies};o.prototype.setDependencies=function(r){this.dependencies=r};o.prototype._loadDependencies=function(s){s=s||[];var t=this.getDependencies();var u=p.indexInArray(s,this)!==-1;if(!u){s[s.length]=this;for(var r=0;r<t.length;r++){t[r].load(s)}}};o.prototype.onError=d;o.prototype._onError=function(s){try{this.onError(s)}catch(r){}};o.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};o.prototype.onLoadTimeout=d;o.prototype.onScriptsLoadSuccess=d;o.prototype.onScriptLoadError=d;o.prototype.onAllDependenciesLoaded=d;o.prototype.onBeforeLoad=d;o.prototype.load=function(){if(this.loadStarted){return}else{this.loadStarted=this.timeoutCountdownStart=new Date().valueOf();try{this.onBeforeLoad()}catch(r){this._onError(r)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad){this.loadDependencies()}}catch(r){throw r}n.call(this)};o.prototype._singleUrlLoadHandler=function(u,t,v){++this.urlsLoaded;if(!u){++this.urlsFailed}if(this.urlsLoaded===t.length){this.loadURLsNotFinished=false;if(u&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=new Date().valueOf();try{if(v){v(true)}}catch(r){this._onError(r)}finally{this.onScriptsLoadSuccess()}}else{var s="error loading urls. Failed "+this.urlsFailed;this._onError(s);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-new Date().valueOf();try{this.scriptLoadingFailed=true;if(v){v(false)}}catch(r){this._onError(r)}finally{this.onScriptLoadError(s)}}}};o.prototype.loadURLs=function(r,w){var v=r||this.config.url;this.addState("LOADING_URL");try{if(v&&!(v instanceof Array)){v=[v]}for(var u=0;u<v.length;u++){this.loadURLsNotFinished=true;var s=v[u];s=this.prepareURL(s);this.loadURL(s,function(x){this._singleUrlLoadHandler(x,v,w)}.bind(this))}}catch(t){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=new Date().valueOf();this._onError(t)}};o.prototype.prepareLocationObject=function(r){return r};o.prototype.prepareURL=function(r){return r};o.prototype.prepareHTML=function(r){return r};o.prototype.loadURL=function(r,t){var s=r;this.addState("LOADING_URL");m.loadScript({onsuccess:function(){try{if(t){t(true)}}catch(u){}}.bind(this),onerror:function(){try{if(t){t(false)}}catch(u){}}.bind(this),url:s,node:this.config.urlLocation||document.body,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};o.prototype.reset=function(){var r;this._injectHTMLTriggered=r;this._loadExecutionURLsAndHTMLInformed=r;this._lockedDocWriteInformed=r;this._runOnceTriggered=r;this._urlLoadTriggered=r;this.afterRun=r;this.beforeRun=r;this.filtersRunTriggered=r;this.injectHTMLFailed=r;this.loadStarted=r;this.loadURLsNotFinished=r;this.loadedDependencies=r;this.loadingDependenciesFailed=r;this.loadingTimedOut=r;this.runIsFinished=r;this.scriptExecuted=r;this.scriptLoadingFailed=r;this.delayDocWrite=r;this._securedWrites=r;this.state=0;this.unexpectedFail=r;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=r;this.isRunning=r;this._lastRun=r;this.cancelled=r;this._beforeEntered=r;this.awaitingDependencies=r;this.timeoutCountdownStart=r;this.addState("INITIAL")};o.prototype.isLoadingAsynchronously=function(){if(this._wasTimed){return true}return !!(this.config.async||this.forceAsynchronous)};o.prototype.willSecureDocumentWrite=function(){return(this.config.usesDocumentWrite&&this.isLoadingAsynchronously())};o.prototype.injectHTML=function(t){var s=!this.docWriteAsksToWaitForBody();var r=this.prepareHTML(this.config.html);if(r){k.injectHTMLForLoader(this,t,s,r)}};o.prototype.clone=function(){var r=new o(this.config);return r}}());(function(){var r=f.opentag.Utils;
var u=f.opentag.TagsUtils;var o=f.opentag.Timed;var p=f.opentag.filter.BaseFilter;var t=f.opentag.GenericLoader;var j=f.opentag.TagHelper;function k(z){var C={filterTimeout:(z&&z.filterTimeout)||this.FILTER_WAIT_TIMEOUT,PACKAGE:(z&&z.PACKAGE),dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false};r.setIfUnset(z,C);k.superclass.apply(this,arguments);this.namedVariables={};this.parameters=[];this.filters=[];this.session=null;if(z){this.addState("INITIAL");try{k.register(this)}catch(B){}if(z.filters){for(var A=0;A<z.filters.length;A++){this.addFilter(z.filters[A])}}if(z.parameters){this.parameters=this.parameters.concat(z.parameters)}if(z.variables){for(var E in z.variables){if(z.variables.hasOwnProperty(E)){var D=this.getParameterByTokenName(E);if(D){var y=z.variables[E];D.variable=y;if(y.defaultValue!==undefined){D.defaultValue=y.defaultValue}if(y.uv!==undefined){D.uv=y.uv}}}}}if(z.locked){this.lock()}this.initPageVariablesForParameters();this.uniqueRefString=null;this.onTagInit()}}f.Define.clazz("qubit.opentag.BaseTag",k,t);k.prototype.valueForToken=function(z,A){var B=this.getParameterByTokenName(z);if(B){if(A===undefined){if(this.loadingTimedOut){A=true}}return this.getParameterValue(B,A)}if(this.namedVariables&&this.namedVariables[z]){var y=s(this,z);if(y){return y.getRelativeValue(A)}}return undefined};k.prototype.LOADING_TIMEOUT=5*1000;k.prototype.FILTER_WAIT_TIMEOUT=-1;k.prototype.run=function(){if(this.config.runner){var y=false;try{this.addState("AWAITING_CALLBACK");y=this._runner=new Date().valueOf();this.config.runner.call(this)}catch(z){}return y}else{this._runner=false;return this.start()}};k.prototype.lock=function(){this.locked=true;this._unlock=null};k.prototype.unlock=function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};k.prototype.start=function(){if(!this.locked){return k.superclass.prototype.run.call(this)}else{this._unlock=function(){return k.superclass.prototype.run.call(this)}.bind(this);return false}};k.prototype.startOnce=function(){if(!this.locked){return k.superclass.prototype.runOnce.call(this)}else{this._unlock=function(){return k.superclass.prototype.runOnce.call(this)}.bind(this);return false}};k.prototype.getFilters=function(){return this.filters};k.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=new Date().valueOf();this.runIfFiltersPass()}};k.prototype.runIfFiltersPass=function(){var A=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered){this.filtersRunTriggered=new Date().valueOf()}if(A===p.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=new Date().valueOf()}else{if(A===p.state.PASS){this.filtersPassed=new Date().valueOf();try{this.onFiltersPassed()}catch(y){}this.run()}else{if(A===p.state.FAIL){this._markFiltersFailed();this._markFinished()}else{if(A>0){var z=this.config.filterTimeout;if(z<0||((new Date().valueOf()-this.filtersRunTriggered)>z)){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=new Date().valueOf();try{this.onFiltersDelayed()}catch(y){}}this._setTimeout(this.runIfFiltersPass.bind(this),A)}else{this._markFiltersFailed();this._markFinished();this.filtersRunTimedOut=new Date().valueOf()}}}}}try{this.onFiltersCheck(A)}catch(B){}return A};k.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date().valueOf())};k.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};k.prototype.addState=function(B){k.superclass.prototype.addState.call(this,B);try{k.onStateChange(this)}catch(z){}this.stateStack=[];var A=this.STATE;var C=this.state;var y=this.stateStack;if(C&A.INITIAL){y.push("Initial state.")}if(C&A.FILTER_ACTIVE){y.push("Tag running with filters pass triggered.")}if(C&A.FILTERS_FAILED){y.push("Filters failed to pass.")}if(C&A.AWAITING_CALLBACK){y.push("Awaiting callback to run this tag. Not pooling.")}if(C&A.STARTED){y.push("Tag is initialized and loading has been started.")}if(C&A.LOADING_DEPENDENCIES){y.push("Dependencies are being loaded.")}if(C&A.LOADED_DEPENDENCIES){y.push("Dependencies loading process has been finished.")}if(C&A.LOADING_URL){y.push("External URL is being loaded.")}if(C&A.LOADED_URL){y.push("External URL has been loaded.")}if(C&A.EXECUTED){y.push("Main script has been executed.")}if(C&A.EXECUTED_WITH_ERRORS){y.push("Main script has been executed but errors occured.")}if(C&A.FAILED_TO_LOAD_DEPENDENCIES){y.push("Dependencies has failed to load.")}if(C&A.FAILED_TO_LOAD_URL){y.push("URL location failed to load.")}if(C&A.FAILED_TO_EXECUTE){y.push("Script failed to execute.")}if(C&A.TIMED_OUT){y.push("Script timed out awaiting for dependencies.")}if(C&A.UNEXPECTED_FAIL){y.push("Script occured UNEXPECTED exception and is failed.")}if(C&A.CANCELLED){y.push("Tag has been cancelled.")}};k.prototype.onTagInit=d;k.onStateChange=d;k.prototype.onFiltersDelayed=d;k.prototype.onFiltersPassed=d;k.prototype.onFiltersCheck=d;k.prototype.state=k.prototype.STATE.INITIAL;k.prototype.arePageVariablesLoaded=function(y){return j.allParameterVariablesReadyForTag(this,y)};k.prototype.getDependenciesToBeLoaded=function(A,y){var z=y||[];if(!this.arePageVariablesLoaded(A)){z.push("page variables")}return k.superclass.prototype.getDependenciesToBeLoaded.call(this,A,z)};k.prototype.prepareURL=function(y){return this.replaceTokensWithValues(y)};k.prototype.prepareLocationObject=function(y){return this.replaceTokensWithValues(y)};k.prototype.prepareHTML=function(y){if(y){y=this.replaceTokensWithValues(y)}return y};k.prototype._executeScript=function(){if(this.config&&this.config.script){if(typeof(this.config.script)==="function"){this.script=this.config.script}else{var y=this.replaceTokensWithValues(String(this.config.script));this.script=r.expressionToFunction(y).bind(this)}}k.superclass.prototype._executeScript.call(this)};k.prototype.replaceTokensWithValues=function(z){if(!z||z.indexOf("${")===-1){return z}var D=this.parameters;if(D){for(var B=0;B<D.length;B++){var E=D[B];var y=this.getVariableForParameter(E);if(y){var A=D[B].token;var C=this.valueForToken(A);z=y.replaceToken(A,z,C)}}}return z};k.prototype.getParameter=function(z){var B=this.parameters;var y=null;if(B){for(var A=0;A<B.length;A++){if(B[A].name===z){y=B[A]}}}return y};k.prototype.setParameterValueByTokenName=function(z,y){var A=this.getParameterByTokenName(z);if(A!==null){A.variable={value:y};return true}return false};k.prototype.getParameterValue=function(A,C){var D=(typeof(A)==="string")?this.getParameter(A):A;if(D){var y=this.getVariableForParameter(D);if(y){try{var B;if(C){B=r.gevalAndReturn(D.defaultValue).result}B=y.getRelativeValue(C,B);return B}catch(z){return undefined}}}return undefined};k.prototype.filtersState=function(y){var z=y;return u.filtersState(this.filters,this.session,this,z)};k.prototype.addFilter=function(y){if(this.session){y.setSession(this.session)}this.filters.push(y)};k.prototype.reset=function(){k.superclass.prototype.reset.call(this);this.resetFilters();var y;this.filtersPassed=y;this.dedupePingSent=y;this.pingSent=y;this._runOnceIfFiltersPassTriggered=y;this.filtersRunTriggered=y;this._runner=y};k.prototype.resetFilters=function(){for(var y=0;y<this.filters.length;y++){this.filters[y].reset()}};k.prototype.getParameterByTokenName=function(z){var y=null;if(this.parameters){var B=this.parameters;for(var A=0;A<B.length;A++){if(B[A].token===z){y=B[A]}}}return y};k.prototype.removeFilter=function(y){r.removeFromArray(this.filters,y)};var n=0;var x=[];var v={};var q={};k.register=function(y){var z=r.addToArrayIfNotExist(x,y);if(z!==-1){}if(z===-1){y._tagIndex=x.length-1
}else{y._tagIndex=z}if(y.config.id){var A="Q"+y.config.id;q[A]=y;y.uniqueId=A}};k.getById=function(y){return q[String(y)]};k.prototype.getById=k.getById;k.prototype.unregister=function(y){k.unregister(y||this)};k.unregister=function(y){var z=r.removeFromArray(x,y);if(!z||z.length===0){}y._tagIndex=-1};k.getTags=function(){return x};k.getAccessorsMap=function(){return v};k.prototype.getTags=function(){return x};k.prototype.initPageVariablesForParameters=function(){var z=this.parameters;if(z){for(var y=0;y<z.length;y++){z[y].variable=j.validateAndGetVariableForParameter(z[y])}}if(this.namedVariables){for(var A in this.namedVariables){if(this.namedVariables.hasOwnProperty(A)){this.namedVariables[A]=j.initPageVariable(this.namedVariables[A])}}}};k.prototype.getPageVariables=function(){var C=this.parameters;var B=[];if(C){for(var A=0;A<C.length;A++){var y=this.getVariableForParameter(C[A]);if(y!==null){r.addToArrayIfNotExist(B,y)}}}if(this.namedVariables){for(var z in this.namedVariables){r.addToArrayIfNotExist(B,s(this,z))}}return B};k.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+n++;v[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};k.prototype.getVariableForParameter=function(A){var y=j.validateAndGetVariableForParameter(A);var z=y&&!y.config.empty;if(!z&&(this.namedVariables&&this.namedVariables[A.token])){y=s(this,A.token)}return y};k.prototype.checkVariablesState=function(){var B=[];var C=j.getAllVariablesWithParameters(this);for(var A=0;A<C.length;A++){var E=C[A].parameter;var y=C[A].variable;var D;if(E&&E.token){D=this.valueForToken(E.token)}else{D=y.getRelativeValue(true)}var z={name:y.config.name,exists:y.exists(),token:E?E.token:null,value:D,variable:y};B.push(z)}return B};k.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};function s(y,A){var z=j.initPageVariable(y.namedVariables[A]);y.namedVariables[A]=z;return z}k.prototype._getUniqueId=function(){var y=this.config.name;if(this.config.id){y=this.config.id}return y};var w="qubit.tag.forceRunning_";var m="qubit.tag.forceAllToRun";k.prototype.cookieSaysToRunEvenIfDisabled=function(){var z=this._getUniqueId();var y=!!f.Cookie.get(m);if(!y){y=!!f.Cookie.get(w+z)}return y};k.prototype.setCookieForcingTagToRun=function(){var y=this._getUniqueId();f.Cookie.set(w+y,"true")};k.setCookieForcingTagsToRun=function(){f.Cookie.set(m,"true")};k.rmCookieForcingTagsToRun=function(){f.Cookie.rm(m)};k.prototype.rmCookieForcingTagToRun=function(){var y=this._getUniqueId();f.Cookie.rm(w+y)};k.rmAllCookiesForcingTagToRun=function(){var A=f.Cookie.getAll();for(var z=0;z<A.length;z++){var y=A[z][0];if(y.indexOf(w)===0){f.Cookie.rm(y)}}k.rmCookieForcingTagsToRun()}}());(function(){var j=function(){};f.Define.clazz("qubit.opentag.Tags",j);j.getById=function(k){return f.opentag.BaseTag.getById(String(k))};j.getAllTagsByState=function(){return f.opentag.Container.getAllTagsByState(j.getTags())};j.findTagByName=function(m){var k=this.getTags();var o=[];for(var n=0;n<k.length;n++){if(k[n].config.name===m){o.push(k[n])}}return o};j.findTagByMatch=function(m){var k=this.getTags();var o=[];for(var n=0;n<k.length;n++){if(k[n].config.name.match(m)){o.push(k[n])}}return o};j.getTags=function(){return f.opentag.BaseTag.getTags()};j.resetAllTags=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].reset()}};j.getContainersPageVariables=function(){var m=j.getContainers();var n=[];for(var k=0;k<m.length;k++){n=n.concat(m.getPageVariables())}return n};j.getAllPageVariables=function(){var k=j.getTags();var n=[];for(var m=0;m<k.length;m++){n=n.concat(k[m].getPageVariables())}return n};j.cancelAll=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].cancel()}};j.resetAll=function(){var k=j.getTags();for(var m=0;m<k.length;m++){k[m].reset()}};j.getPageVariableByName=function(k){var o=j.getAllPageVariables();var n=[];for(var m=0;m<o.length;m++){if(o[m].config.name===k){n.push(o[m])}}return n};j.getLoadTime=function(k){var n=k.beforeRun;var m=k.runIsFinished;if(isNaN(m)){return{tag:k,loadTime:null}}else{return{tag:k,loadTime:(m-n)}}};j.getLoadTimes=function(m){var k=[];if(m instanceof f.opentag.BaseTag){k.push([j.getLoadTime(m[o])]);return k}m=m||j.getTags();var p=m instanceof Array;if(p){for(var n=0;n<m.length;n++){if(m[n] instanceof f.opentag.BaseTag){k.push(j.getLoadTime(m[n]))}}}else{for(var o in m){if(m[o] instanceof f.opentag.BaseTag){k.push(j.getLoadTime(m[o]))}}}return k};j.forceAllContainersAndTagsToRunIfDisabled=function(){f.opentag.Container.setCookieForDisabledContainersToRun();f.opentag.BaseTag.setCookieForcingTagsToRun()};j.rmAllContainersAndTagsForcingFlags=function(){f.opentag.Container.rmCookieForDisabledContainersToRun();f.opentag.BaseTag.rmAllCookiesForcingTagToRun()};j.getContainers=function(){return f.opentag.Container.getContainers()}})();g.cookie={};g.cookie.PageView={};g.cookie.PageView.update=function(){var j,m;m=function k(){return(Math.floor(1+Math.random()*65536)).toString(36).substring(1)};if(!window.__pageViewId__){j=new Date().getTime().toString(36);window.__pageViewId__=j+m()+m()+m()}return window.__pageViewId__};g.html.PostData=function(n,r,t){var s,p,v,o,m,u,q,k,w,j;j=2;w=5000;q=false;k=function(){if(j>0){setTimeout(function(){if(!q){j-=1;s()}},w)}};p=navigator.userAgent.toLowerCase();v=p.indexOf("msie")!==-1;o=p.indexOf("msie 9")!==-1;m=((p.indexOf("msie 7")!==-1)||(p.indexOf("msie 6")!==-1));u=("https:"===document.location.protocol?"https:":"http:")+n;t=t||"POST";s=function(){var C;try{C=null;try{C=new XMLHttpRequest()}catch(B){}if(C&&!v){C.open(t,u,true)}else{if(typeof XDomainRequest!=="undefined"){C=new XDomainRequest();C.open(t,u)}else{C=null}}try{C.withCredentials=false}catch(A){}if(C.setRequestHeader){C.setRequestHeader("Content-Type","text/plain;charset=UTF-8")}C.onload=function(){q=true};C.onreadystatechange=function(){};C.ontimeout=function(){};C.onerror=function(){};C.onprogress=function(){};C.send(r)}catch(y){try{try{g.html.fileLoader.load(u)}catch(x){if(window.console&&window.console.log){window.console.log(y)}}}catch(z){}}k()};if(m){g.html.fileLoader.load(u);return}else{s()}};(function(){function j(){}f.Define.clazz("qubit.opentag.Ping",j);j.prototype.send=function(m,s){var n="c="+m.clientId+"&p="+m.containerId+"&l="+m.tellLoadTimesProbability+"&pv="+g.cookie.PageView.update()+"&d=";var o=[];for(var q=0;q<s.length;q++){var t=s[q].tag;var p=s[q].loadTime;if(p===null||isNaN(p)){continue}var r=t.config.id;if(!t.pingSent&&r&&p!==null){if(r!==undefined){o.push('"'+r+'":'+p);t.pingSent=true}else{}}else{if(t.pingSent){}else{if(p===null){}}}}if(m.pingServerUrl&&o.length>0){n+=encodeURIComponent("{"+o.join(",")+"}");var k="//"+m.pingServerUrl+"/tag2?"+n;g.html.PostData(k,null,"GET")}else{if(!o.length){}if(!m.pingServerUrl){}}};j.prototype.sendErrors=function(k,m){};j.prototype.sendDedupe=function(o,n){var q="c="+o.clientId+"&p="+o.containerId+"&l="+(o.tellLoadTimesProbability)+"&pv="+g.cookie.PageView.update()+"&dd=";var m=[];for(var p=0;p<n.length;p++){var k=n[p];var r=k.config.id;if(r===undefined){}else{if(!k.dedupePingSent){m.push(r);k.dedupePingSent=true}}}if(m.length>0&&o.pingServerUrl){q+=encodeURIComponent("["+m.join(",")+"]");g.html.PostData("//"+o.pingServerUrl+"/tag2?"+q,null,"GET")}else{if(!m.length){}if(!o.pingServerUrl){}}}}());g.cookie.SimpleSessionCounter={};g.cookie.SimpleSessionCounter._cookieName="_qst_s";g.cookie.SimpleSessionCounter._sessionCookie="_qsst_s";g.cookie.SimpleSessionCounter.update=function(m){var o,j,n,k=30;o=f.Cookie.get(g.cookie.SimpleSessionCounter._cookieName);j=f.Cookie.get(g.cookie.SimpleSessionCounter._sessionCookie);if(!o){o=1}else{o=parseInt(o,10);if(!j||(parseInt(j,10)<(new Date().getTime()-k*60*1000))){o+=1}}f.Cookie.set(g.cookie.SimpleSessionCounter._cookieName,o,365,m);f.Cookie.set(g.cookie.SimpleSessionCounter._sessionCookie,new Date().getTime().toString(),null,m);return o};var i={};(function(){function o(u){return u<10?"0"+u:u
}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,k,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function j(u){q.lastIndex=0;return q.test(u)?'"'+u.replace(q,function(v){var w=t[v];return typeof w==="string"?w:"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function n(u){return isFinite(u.valueOf())?u.getUTCFullYear()+"-"+o(u.getUTCMonth()+1)+"-"+o(u.getUTCDate())+"T"+o(u.getUTCHours())+":"+o(u.getUTCMinutes())+":"+o(u.getUTCSeconds())+"Z":null}function p(C,z){var x,w,D,u,A=r,y,B=z[C];if(B instanceof Date){B=n(B)}else{if((B instanceof String)||(B instanceof Number)||(B instanceof Boolean)){B=B.valueOf()}}if(typeof s==="function"){B=s.call(z,C,B)}switch(typeof B){case"string":return j(B);case"number":return isFinite(B)?String(B):"null";case"boolean":case"null":return String(B);case"object":if(!B){return"null"}r+=k;y=[];if(Object.prototype.toString.apply(B)==="[object Array]"){u=B.length;for(x=0;x<u;x+=1){y[x]=p(x,B)||"null"}D=y.length===0?"[]":r?"[\n"+r+y.join(",\n"+r)+"\n"+A+"]":"["+y.join(",")+"]";r=A;return D}if(s&&typeof s==="object"){u=s.length;for(x=0;x<u;x+=1){if(typeof s[x]==="string"){w=s[x];D=p(w,B);if(D){y.push(j(w)+(r?": ":":")+D)}}}}else{for(w in B){if(Object.prototype.hasOwnProperty.call(B,w)){D=p(w,B);if(D){y.push(j(w)+(r?": ":":")+D)}}}}D=y.length===0?"{}":r?"{\n"+r+y.join(",\n"+r)+"\n"+A+"}":"{"+y.join(",")+"}";r=A;return D}}if(typeof i.stringify!=="function"){i.stringify=function(x,v,w){var u;r="";k="";if(typeof w==="number"){for(u=0;u<w;u+=1){k+=" "}}else{if(typeof w==="string"){k=w}}s=v;if(v&&typeof v!=="function"&&(typeof v!=="object"||typeof v.length!=="number")){throw new Error("JSON.stringify")}return p("",{"":x})}}if(typeof i.parse!=="function"){i.parse=function(x,u){var w;function v(B,A){var z,y,C=B[A];if(C&&typeof C==="object"){for(z in C){if(Object.prototype.hasOwnProperty.call(C,z)){y=v(C,z);if(y!==undefined){C[z]=y}else{delete C[z]}}}}return u.call(B,A,C)}x=String(x);m.lastIndex=0;if(m.test(x)){x=x.replace(m,function(y){return"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(x.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){w=eval("("+x+")");return typeof u==="function"?v({"":w},""):w}throw new SyntaxError("JSON.parse")}}}());(function(){var q=[];var j=Math.pow(2,8);for(var r=0;r<j;r++){q.push(String.fromCharCode(r))}var m={};for(var k=0;k<q.length;k++){m[q[k]]=k}var o=f.Define;function p(s){if(s){if(s.alphabet){this.alphabet=s.alphabet;this.dict={};for(var t=0;t<this.alphabet.length;t++){this.dict[this.alphabet[t]]=t}}else{this.alphabet=q;this.dict=m}}}o.clazz("qubit.compression.LZW",p);p.prototype.encode=function(y){var s=this.alphabet.length;var t={};var w=[];var z=0;var B=y.charAt(z++);var x;var v=this.dict;while(!!(x=y.charAt(z++))){var A=B+x;if(v.hasOwnProperty(A)||t.hasOwnProperty(A)){B=A}else{var u=v.hasOwnProperty(B)?v[B]:t[B];if(u===undefined){throw"Dictionary base is to small for those contents: "+B}w.push(u);t[A]=s++;B=x}}if(B!==""){w.push(t.hasOwnProperty(B)?t[B]:v[B])}return w};p.prototype.decode=function(s){var t=this.dict;var y=this.alphabet.length;var z;var u={};var A=n(s[0],t);var x=A;var w=[A];for(var v=1;v<s.length;v++){var B=s[v];z=n(B,t);if(z===null){if(u.hasOwnProperty(B)){z=u[B]}if(z===null){z=x+A}}w.push(z);A=z.charAt(0);u[y++]=x+A;x=z}return w.join("")};function n(s,u){for(var t in u){if(s===u[t]){return t}}return null}}());(function(){var o="abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[";var k='ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-+()@{|}"]^_`~$&#';var q={};for(var s=0;s<o.length;s++){q[o.charAt(s)]=s}var r={};for(var x=0;x<o.length;x++){r[k.charAt(x)]=x}var u={};for(var t=0;t<o.length;t++){u[o.charAt(t)]=k.charAt(t)}var n=o.split("");var w=n.length;function y(B){var z=0;var A=B<0;if(A){B=-B}var C="";var D=true;do{z=B%w;if(D){C=u[n[z]];D=false}else{C=n[z]+C}B=(B-z)/w}while(B>0);if(A){return"-"+C}return C}function j(B){var C=0;var A=0;var E=true;for(var z=0;z<B.length;z++){var D=B.charAt(B.length-1-z);if(E){E=false;D=o.charAt(r[D])}C+=q[D]*Math.pow(w,A++)}return C}var v=new f.compression.LZW({});var p=f.Define;function m(z){}p.clazz("qubit.compression.Compressor",m);m.prototype.compress=function(A,C){var D=(C||v).encode(A);var z=[];for(var B=0;B<D.length;B++){z.push(String.fromCharCode(D[B]))}return z.join("")};m.prototype.compressAnsi=function(B,D){var E=(D||v).encode(B);var z=[];for(var C=0;C<E.length;C++){var A=y(E[C]);z.push(A)}return z.join("")};m.prototype.decompressAnsi=function(D,C){var F=[];var E="";for(var A=0;A<D.length;A++){var B=D.charAt(A);if(r.hasOwnProperty(B)){var z=E+B;E="";z=j(z);F.push(z)}else{E+=B}}return(C||v).decode(F)};m.prototype.decompress=function(B,A){var C=[];for(var z=0;z<B.length;z++){C.push(B.charCodeAt(z))}return(A||v).decode(C)}}());(function(){var x=f.Define;var r=f.Cookie;var B=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["<","S"],[">","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];function q(F){var E=[];for(var D=0;D<F.length;D++){var C=m(F[D][0]);E.push([new RegExp(C,"g"),"*"+F[D][1]])}return E}function t(E,D){for(var C=0;C<D.length;C++){if(D[C][1]===E){return D[C][0]}}return null}var w=q(B);function u(C){this._regexDefs=w;this._defs=B;if(C){if(C.definitions){this._regexDefs=q(C.definitions);this._defs=C.definitions}}}x.clazz("qubit.opentag.compression.Encoder",u);u.prototype.encode=function n(I,H){var K=I.replace(/\*/g,"**");var C=k(K);for(var G=0;G<this._regexDefs.length;G++){var F=this._regexDefs[G];K=K.replace(F[0],F[1])}K=K.replace(/;/g,"*-");K=K.replace(/&/g,"*.");K=K.replace(/\\/g,"*/");K=K.replace(/=/g,"*+");K=K.replace(/\n/g,"*N");K=K.replace(/ /g,"*_");K=K.replace(/\t/g,"*T");K=K.replace(/"/g,"*Q");var J=k(K);J.concat(C);var L=o(J,K);var D=L[1];var E=D.length>0;if(E){K=L[0]}if(!H){K=y(K)}else{K=y(K,H)}if(E){return"Y"+D.join("*")+"@"+K}else{return"N"+K}};function y(E,C){var G=[];for(var F=0;F<E.length;F++){var H=true;if(C){H=E.charCodeAt(F)<=C}var D=r.cookieAlphabetMap.hasOwnProperty(E.charAt(F));if(H&&!D){G.push("*"+E.charCodeAt(F)+".")}else{G.push(E.charAt(F))}}return G.join("")}function o(G,E){E=E.replace(/@/g,"@@");var J=[];for(var F=0,D=0;F<G.length;F++){var H=G[F][0];var I=new RegExp(m(H),"g");var C=E.replace(I,"@"+D+"-");if(C!==E){J.push(G[F][0]);D++;E=C}}return[E,J]}function m(C){return C.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var p="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";var s={};for(var z=0;z<p.length;z++){s[p.charAt(z)]=true}var j=4;var A=2;function k(H){var G={};var F="";for(var C=0;C<H.length;C++){var E=H.charAt(C);if(!s[E]){if(isNaN(G[F])){G[F]=H.split(F).length-1}F=""}else{F+=E}}var J=[];for(var I in G){if(G.hasOwnProperty(I)){var D=G[I];if(D>=A&&I.length>=j){J.push([I,D])}}}J=J.sort(function(L,K){if(L[0].length===K[0].length){return 0}if(K[0].length>L[0].length){return 1}else{return -1}});return J}u.prototype.decode=function(G){var H=null;if(G.charAt(0)==="N"){G=G.substring(1)
}else{if(G.charAt(0)==="Y"){var L=G.indexOf("@");if(L>=0){H=G.substring(1,L);H=H.split("*");G=G.substring(L+1);G=v(G,H)}}}var I="";var K=false;var E=false;var J="";for(var F=0;F<G.length;F++){var C=G.charAt(F);if(C==="*"||K||E){if(K||E){K=false;if(!isNaN(+("-"+C))){J=J+C;E=true}else{if(E){if(C==="."){I+=String.fromCharCode(+J)}else{if(C==="-"&&t(J+"-",this._defs)){I+=t(J+"-",this._defs)}else{I+="*"+J+C}}J="";E=false}else{if(C==="*"){I+="*"}else{if(C==="-"){I+=";"}else{if(C==="/"){I+="\\"}else{if(C==="."){I+="&"}else{if(C==="+"){I+="="}else{if(C==="N"){I+="\n"}else{if(C==="_"){I+=" "}else{if(C==="T"){I+="\t"}else{if(C==="Q"){I+='"'}else{if(t(C,this._defs)!==null){var D=t(C,this._defs);I+=D}else{I+="*"+C}}}}}}}}}}}}}else{K=true}}else{I+=C}}if(J){I+="*"+J}if(K){I+="*"}return I};function v(D,I){if(!I||I.length===0||!D){return D}var C="";var J=false;var F=false;var H="";for(var E=0;E<D.length;E++){var G=D.charAt(E);if(G==="@"||J||F){if(J||F){J=false;if(G==="@"){C+="@"}else{if(!isNaN(+("-"+G))){F=true;H=H+G}else{if(F){if(I&&G==="-"&&I[+H]){C+=I[+H]}else{C+="@"+H+G}H="";F=false}else{C+="@"+G}}}}else{J=true}}else{C+=G}}if(H){C+="@"+H}if(J){C+="@"}return C}})();(function(){var m=f.Define;var j=f.Cookie;var k=false;function n(o){this.testBinary=false;this.binSupported=k;if(o){this.compressor=new f.compression.Compressor();this.encoder=new f.opentag.compression.Encoder({})}}m.clazz("qubit.opentag.compression.CookieCompressor",n);n.prototype.compress=function(q,w){if(typeof(q)!=="string"||q===""){return q}var u=this.encoder.encode(q);var t;if(this.binSupported||this.testBinary){var s=this.compressor.compress(u);t='"B'+this.encoder.encode(s,128)+'"';j.set("__qtag_test_bin__",t,undefined,undefined,true);var v=j.get("__qtag_test_bin__",true);j.rm("__qtag_test_bin__");if(v&&v!==t){t=null}}var p;var r=this.encoder.encode(this.compressor.compressAnsi(u));if((!w)&&u.length<=r.length){p="E"+u}else{p="C"+r}if(t&&t.length<p.length){return t}else{return p}};n.prototype.decompress=function(o){if(typeof(o)!=="string"||o===""){return o}if(o.charAt(0)==='"'){o=o.substring(1,o.length-1)}var r=o.charAt(0);o=o.substring(1);switch(r){case"E":return this.encoder.decode(o);case"C":var p=this.compressor.decompressAnsi(this.encoder.decode(o));return this.encoder.decode(p);case"B":var q=this.compressor.decompress(this.encoder.decode(o));return this.encoder.decode(q);default:throw"This code is not supported! Code: "+r}}})();(function(){var j=f.Cookie;var m=f.opentag.Utils;var k=function(){};f.Define.clazz("qubit.opentag.Session",k);var n=new f.opentag.compression.CookieCompressor({});k.readCompressedCookie=function(o){var p=j.get(o,true);return n.decompress(p)};k.setupSession=function(r){var v,s,p,t,x,q;v={};v.sessionCount=g.cookie.SimpleSessionCounter.update(r.cookieDomain);x="qtag_"+r.containerId;var o="x_qtag_"+r.containerId;p=j.get(x);var w=!!p;if(p===null){p=j.get(o,true);p=n.decompress(p)}if(p){try{p=i.parse(p)}catch(u){p={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}}else{p={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}q=new Date().getTime();if(v.sessionCount!==parseInt(p.sc,10)){p.sessionStartTime=q;p.sc=v.sessionCount;p.sessionCount+=1;p.referrer.push({url:k.getReferrer(),landing:m.getUrl().substring(0,300),time:q});p.sessionLandingPage=m.getUrl().substring(0,300)}else{if(k.isReferrerDifferent()){if(!k.referrerIsSameAsPrevious(p.referrer,q,30*60*1000)){p.referrer.push({url:k.getReferrer(),landing:m.getUrl().substring(0,300),time:q});p.sessionLandingPage=m.getUrl().substring(0,300);p.sessionStartTime=q;p.sessionCount+=1}}}v.sessionCount=p.sessionCount;v.sessionStartTime=p.sessionStartTime;v.pageStartTime=q;p.pageViews+=1;v.pageViews=p.pageViews;v.sessionLandingPage=p.sessionLandingPage;v.referrer=p.referrer;if(v.referrer.length>5){v.referrer.splice(2,v.referrer.length-5)}t=i.stringify(p);s=0;while((n.compress(t).length>r.maxCookieLength)&&(s<5)){if(p.referrer.length>=3){p.referrer.splice(2,1)}else{if(p.referrer.length===2){p.referrer=[p.referrer[0]]}else{if(p.referrer.length===1){p.referrer=[]}}}t=i.stringify(p);s+=1}v.referrer=p.referrer;if(w){j.rm(x)}var y=n.compress(t);j.rm(o);if(r.maxCookieLength>0){j.set(o,y,365,r.cookieDomain,true)}v.setVariable=function(B,C,D){var A=(!!D)?D:0;p.__v[B]=[C,A];var z=n.compress(i.stringify(p));if(r.maxCookieLength>0){j.set(o,z,365,r.cookieDomain,true)}else{j.rm(o)}};v.getCookie=function(z,C){var B=j.get(z,true);if(B&&(C||z.indexOf("x_")===0)){try{B=n.decompress(B)}catch(A){}}else{if(B!==null){B=j.decode(B)}}return B};v.getVariable=function(C){var z,B,A;z=p.__v[C];if(z){B=z[1];if((B===0)||(B>new Date().getTime())){return z[0]}}return null};v.on=function(B,A,z){if(A.attachEvent){A.attachEvent("on"+B,z)}else{if(A.addEventListener){A.addEventListener(B,z,false)}}};v.getTagCookie=function(){return k.readCompressedCookie(o)};k.lastSession=v;return v};k.referrerIsSameAsPrevious=function(p,r,t){var q,o,s;if(p.length>0){q=k.getReferrer();o=m.getUrl().substring(0,300);s=p[p.length-1];return(s.url===q)&&(s.landing===o)&&((s.time+t)>r)}return false};k.isReferrerDifferent=function(){var r,o,q;q=k.getReferrer();r=q.indexOf("://");if(r===-1){return true}r+=3;try{if(q.substring(r).indexOf(k.getDomain())!==0){return true}return false}catch(p){return true}};k.getReferrer=function(){if(document.referrer){return document.referrer.substring(0,300)}return"direct"};k.getDomain=function(){return document.location.host}}());(function(){var t=f.opentag.Utils;var s=f.opentag.filter.BaseFilter;var n=f.opentag.BaseTag;var r=f.opentag.Timed;var p=f.opentag.Tags;var q=f.opentag.Session;var j=f.Cookie;var w=1;try{window.opentag_consentGiven=function(){o.consentIsGiven=true;var z=o.getContainers();for(var y=0;y<z.length;y++){try{z[y].run()}catch(x){}}}.bind(this)}catch(u){}function o(x){this.runQueue=[];this.tags={};this.config={cookieDomain:"",maxCookieLength:1000,gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:0,pingServerUrl:null,trackSession:false,disabled:false,containerId:""};this.ignoreTagsState=false;if(x){this.setConfig(x);this.isTellingLoadTimes=this.config.tellLoadTimesProbability>Math.random();if(!x.name){this.config.name="Cont-"+w++}o.register(this);this.ping=new f.opentag.Ping(this.config);if(this.config.trackSession){this.session=q.setupSession(this.config)}if(this.session){}}return this}f.Define.clazz("qubit.opentag.Container",o);var m=[];o.register=function(x){t.addToArrayIfNotExist(m,x)};o.findContainersByName=function(y){var x=this.getContainers();var A=[];for(var z=0;z<x.length;z++){if(x[z].config.name===y){A.push(x[z])}}return A};o.getById=function(z){var x=this.getContainers();for(var y=0;y<x.length;y++){if(x[y].config.containerId===z){return x[y]}}return null};o.prototype.unregister=function(){o.unregister(this)};o.unregister=function(y){t.addToArrayIfNotExist(m,y);var x=t.removeFromArray(m,y);if(!x||x.length===0){}};o.prototype.hasConsent=function(){return j.get("qubitconsent")==="Accepted"};o.prototype.register=function(x){o.register(x||this)};o.getContainers=function(){return m};o.prototype.getContainers=function(){return o.getContainers()};o.prototype.onTagRegistered=function(x){};o.prototype.registerTag=function(x){var y=x.config.name;if(this.tags[y]){}else{this.tags[y]=x;try{this.onTagRegistered(x)}catch(z){}}};o.prototype.registerTags=function(x){for(var y=0;y<x.length;y++){this.registerTag(x[y])}};o.prototype.setConfig=function(x){for(var y in x){this.config[y]=x[y]}};o.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};o.prototype.runWithoutFilters=function(){this.runTags({command:"run"})};o.prototype.getTagByname=function(x){return this.tags[x]};o.prototype.containerScriptLoadedSynchronously=function(){var z,A,y,x,B;x=document.getElementsByTagName("script");for(z=0,A=x.length;z<A;z+=1){y=x[z];B=y.getAttribute("src");if(!!B&&(B.indexOf(""+this.config.clientId+"-"+this.config.profileName+".js")>0)){return(y.getAttribute("async")===null&&(y.getAttribute("defer")===false||y.getAttribute("defer")===""||y.getAttribute("defer")===null))
}}return true};o.prototype.runTags=function(z,y){if(!y){if(o.LOCKED||t.global().QUBIT_CONTAINERS_LOCKED){return}}var C=!this.containerScriptLoadedSynchronously();var B="runIfFiltersPass";if(z&&z.command){B=z.command}this.runningStarted=new Date().valueOf();var H={};for(var x in this.tags){try{var I=this.tags[x];if(this.includedToRun(I)){var G=I.getDependencies();if(G.length>0){for(var D=0;D<G.length;D++){var A=G[D];var F=A.config.name;if(!H[F]&&this.tags[F]){H[F]=A;this._tagRunner(A,B,C)}}}if(!H[x]){H[x]=I;this._tagRunner(I,B,C)}}}catch(E){}}r.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),1100);this.waitForAllTagsToFinish()};o.prototype._tagRunner=function(x,A,y){try{if(this.includedToRun(x)){if(y){x.forceAsynchronous=true}if(this.config.delayDocWrite){x.delayDocWrite=true}x.session=x.session||this.session;x[A]()}}catch(z){}};o.prototype.includedToRun=function(x){if(!x){return false}var y=x.config;if(y.inactive){return false}if(y.disabled){if(!x.cookieSaysToRunEvenIfDisabled()){return false}}var z=o.consentIsGiven||(!y.needsConsent)||this.hasConsent();var A=(x.state===n.prototype.STATE.INITIAL);return this.ignoreTagsState||(z&&A)};o.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting){return}if(!this._lastWaited){this._lastWaited=new Date().valueOf()}var x=(new Date().valueOf()-this._lastWaited)>15*1000;var y=this.allTagsFinished()||x;if(!this._showFinishedOnce&&y){this._lastWaited=null;if(x){}this._showFinishedOnce=true;this.runningFinished=new Date().valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun){this.onTagsInitiallyRun()}}else{if(!y){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;r.setTimeout(function(){this._waitForAllTagsToFinishWaiting=false;this.waitForAllTagsToFinish()}.bind(this),100)}else{l.INFO("********************************************************");l.WARN("All tags seem to finished current jobs.");l.INFO("********************************************************")}}};o.prototype.onTagsInitiallyRun=d;o.prototype.resetAllTags=function(){for(var x in this.tags){if(this.tags.hasOwnProperty(x)){this.tags[x].reset()}}};o.prototype.reset=function(){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=undefined;this.resetAllTags()};o.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};r.runIfNotScheduled(this.sendPings.bind(this),2000,this._sndLck)};o.prototype.sendPings=function(){var B;if(this.isTellingLoadTimes){var A=this.getAllTagsByState();var D=this;var C;if(A.run){C=p.getLoadTimes(A.run);this.lastPingsSentTime=new Date().valueOf();this.ping.send(this.config,C)}C=p.getLoadTimes();var y=[];for(B=0;B<C.length;B++){(function(F){var E=C[F].tag;if(E.config.dedupe&&E.sendDedupePing){y.push(E)}}(B))}if(y.length>0){this.lastDedupePingsSentTime=new Date().valueOf();this.ping.sendDedupe(this.config,y)}if(A.other){C=p.getLoadTimes(A.other);var z=[];for(B=0;B<C.length;B++){(function(F){var E=C[F].tag;z.push(C[F]);var G=E.onAfter;E.onAfter=function(H){G.call(E,H);D.sendPingsNotTooOften();if(H){}}}(B))}if(z.length>0){this.ping.send(this.config,z)}}if(A.awaiting){C=p.getLoadTimes(A.awaiting);var x=[];for(B=0;B<C.length;B++){(function(F){var E=C[F].tag;x.push(C[F]);var G=E.onAfter;E.onAfter=function(H){G.call(E,H);D.sendPingsNotTooOften();if(H){}}}(B))}if(x.length>0){this.ping.send(this.config,x)}}}};o.prototype.getAllTagsByState=function(){return o.getAllTagsByState(this.tags)};o.getAllTagsByState=function(H){var F=null,B=null,C=null,A=null,E=null,z=null;var D=n.prototype.STATE.EXECUTED_WITH_ERRORS;for(var y in H){var G=H[y];if(G instanceof n){var x=G.config.name;if(G.scriptExecuted>0){F=F||{};k(F,G,x)}else{if(G.locked){z=z||{};k(z,G,x)}else{if(G.scriptExecuted<0||(G.state>=D)){A=A||{};k(A,G,x)}else{if(G.filtersState()===s.state.SESSION||G.filtersState()>0){C=C||{};k(C,G,x)}else{if(G.config.needsConsent){E=E||{};k(E,G,x)}else{B=B||{};k(B,G,x)}}}}}}}return{run:F,failed:A,awaiting:C,consent:E,locked:z,other:B}};var v={};function k(y,z,x){if(y[x]){v[x]=v[x]||1;x+="("+v[x]+")";v[x]++}y[x]=z}o.prototype.allTagsFinished=function(){for(var D in this.tags){if(this.tags.hasOwnProperty(D)){var z=this.tags[D];if(z instanceof f.opentag.BaseTag){var C=z.filtersState();if(!z.config.disabled){var y=z.filtersState()<0&&!z.locked;var x=!(z.finished()||(z.config.runner&&!z.isRunning));if(y&&x){var B=(C!==s.state.SESSION);var A=+z.awaitingDependencies>0;if(B&&!A){return false}}}}}}return true};o.prototype.getPageVariables=function(){var z=[];for(var A in this.tags){if(this.tags.hasOwnProperty(A)){var y=this.tags[A].getPageVariables();for(var x=0;x<y.length;x++){t.addToArrayIfNotExist(z,y[x])}}}return z};o.getPageVariableByName=function(x){var A=this.getAllPageVariables();var z=[];for(var y=0;y<A.length;y++){if(A[y].config.name===x){z.push(A[y])}}return z};o.setCookieForDisabledContainersToRun=function(){f.Cookie.set("qubit.opentag.forceContainerRunning","true")};o.rmCookieForDisabledContainersToRun=function(){f.Cookie.rm("qubit.opentag.forceContainerRunning")}})();(function(){var k=f.opentag.Utils;function j(m){k.setIfUnset(m,j.defaultConfig);if(this.singleton){var n=this.PACKAGE_NAME+"."+this.CLASS_NAME;var o=f.opentag.Utils.getObjectUsingPath(n,c);if(o.__instance){return o.__instance}o.__instance=this}j.superclass.call(this,m)}f.Define.clazz("qubit.opentag.LibraryTag",j,f.opentag.BaseTag);j.defaultConfig={vendor:null,imageUrl:null,description:"Provide description.",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[]};j.prototype.pre=function(){};j.prototype.post=function(){};j.prototype.before=function(){j.superclass.prototype.before.call(this);if(this.config.html||this.config.script){return false}try{var m=this.config;if(m&&m.pre){if(typeof(m.pre)==="function"){this.pre=m.pre;this.pre()}else{var o=this.replaceTokensWithValues(String(m.pre));if(this.config.prePostWindowScope){k.geval(o)}else{this.pre=k.expressionToFunction(o).bind(this);this.pre()}}}else{this.pre()}}catch(n){return true}return false};j.prototype.after=function(p){j.superclass.prototype.after.call(this,p);if(this.config.html||this.config.script){return}try{var m=this.config;if(m&&m.post){if(typeof(m.post)==="function"){this.post=m.post;this.post(p)}else{var o=this.replaceTokensWithValues(String(m.post));if(this.config.prePostWindowScope){k.geval(o)}else{this.post=k.expressionToFunction(o).bind(this);this.post(p)}}}else{this.post(p)}}catch(n){}};j.define=function(p,s){p=p.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");var o=s.config;var q=s.CONSTRUCTOR;var m={};for(var r in s){if(r!=="config"){m[r]=s[r]}}m.CONSTRUCTOR=function(t){t=t||{};var v=k.objectCopy(o,{maxDeep:8});for(var w in v){if(!t.hasOwnProperty(w)){t[w]=v[w]}}var u=f.opentag.LibraryTag.call(this,t);if(q){q.call(this,t)}if(u){return u}};var n=f.opentag.Utils.defineClass(p,j,m,a);k.namespace("qubit.opentag.libraries."+p,n);return n}}());(function(){var k=f.opentag.Utils;function j(m){var n={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",prePostWindowScope:true,async:true};k.setIfUnset(m,n);j.superclass.call(this,m)}f.Define.clazz("qubit.opentag.CustomTag",j,f.opentag.LibraryTag)}());(function(){var k=f.Define;var j={CONTAINS:"Contains",MATCHES_EXACTLY:"Matches Exactly",STARTS_WITH:"Starts with",ENDS_WITH:"Ends with",REGULAR_EXPRESSION:"Regular Expression",ALL_URLS:"All URLs"};k.namespace("qubit.opentag.filter.pattern.PatternType",j)}());(function(){var m=f.opentag.Utils;var k=f.opentag.filter.BaseFilter;var o=f.opentag.Timed;var j=f.opentag.filter.pattern.PatternType;function n(q){this._lockObject={};var p={patternType:j.CONTAINS,pattern:""};if(q){for(var r in q){if(q.hasOwnProperty(r)){p[r]=q[r]}}}n.superclass.call(this,p)}f.Define.clazz("qubit.opentag.filter.URLFilter",n,k);n.prototype.getURL=function(p){return p||m.getUrl()};n.prototype.match=function(q){q=this.getURL(q);var p=true;var r=this.config.pattern;
switch(this.config.patternType){case j.CONTAINS:p=(q.toLowerCase().indexOf(r.toLowerCase())>=0);break;case j.MATCHES_EXACTLY:p=(q.toLowerCase()===this.config.pattern.toLowerCase());break;case j.STARTS_WITH:p=(q.toLowerCase().indexOf(r.toLowerCase())===0);break;case j.ENDS_WITH:p=((q.lastIndexOf(r.toLowerCase())+r.length)===q.length);break;case j.REGULAR_EXPRESSION:p=new RegExp(r).test(q);break;case j.ALL_URLS:p=true;break}return p}}());(function(){var m=f.opentag.Utils;var I=f.opentag.filter.pattern.PatternType;var H=f.opentag.filter.URLFilter;var J=f.opentag.filter.SessionVariableFilter;var E=f.opentag.LibraryTag;var A=f.opentag.CustomTag;var z=f.opentag.pagevariable.DOMText;var D=f.opentag.pagevariable.BaseVariable;var u=f.opentag.pagevariable.URLQuery;var v=f.opentag.pagevariable.Cookie;var M=f.opentag.pagevariable.Expression;function x(N){this.config={filters:[],profileName:"",qTagClientId:"",pageVars:{},scriptLoaders:{},tellLoadTimesProbability:0,containerDisabled:false,pingServerUrl:"",qtag_domain:"",delayDocWrite:false,maxCookieLength:1000,containerName:""};this.config.qtag_track_session=true;for(var O in N){if(N.hasOwnProperty(O)){this.config[O]=N[O]}}}f.Define.clazz("qubit.opentag.OldTagRunner",x);x.prototype.run=function(){if(!this._run){this._run=new Date().valueOf();this.container=new f.opentag.Container({cookieDomain:this.config.qtag_domain,maxCookieLength:this.config.maxCookieLength,delayDocWrite:this.config.delayDocWrite,gzip:true,clientId:this.config.qTagClientId,containerId:this.config.profileName,name:this.config.containerName,tellLoadTimesProbability:this.config.tellLoadTimesProbability,disabled:this.config.containerDisabled,pingServerUrl:this.config.pingServerUrl,trackSession:this.config.qtag_track_session});var O=this.getTags();this.container.registerTags(O);if(!this.container.config.disabled){this.container.run()}else{var N=f.Cookie.get("qubit.opentag.forceContainerRunning");if(N!==null){this.container.run()}else{}}}};x.prototype.getTags=function(){var P=this.config.filters;var aa=this.config.scriptLoaders;var S=this.config.pageVars;var ab=[];var N,Y,ac;for(N in aa){if(aa.hasOwnProperty(N)){Y=aa[N];var W=L(P,N);var O=r(Y,S);var X="";if(Y.locationId===1){X="HEAD"}else{if(Y.locationId===2){X="BODY"}else{if(Y.locationId===3){X=Y.locationDetail}}}var Z=Y.dedupe;var U={name:Y.name,filters:W,parameters:O,id:Y.id,locked:!!Y.locked,url:Y.url,html:Y.html,template:!!Y.template,locationPlaceHolder:((+Y.positionId)===1)?"NOT_END":"END",locationObject:X,disabled:Y.disabled,async:Y.async,needsConsent:Y.needsConsent,usesDocumentWrite:Y.usesDocWrite,genericDependencies:Y.genericDependencies};if(Y.prePostWindowScope!==undefined){U.prePostWindowScope=Y.prePostWindowScope}if(Z){U.dedupe=true}if(Y.runner){U.runner=Y.runner}if(Y.pre){U.pre=Y.pre}if(Y.post){U.post=Y.post}if(Y.script){U.script=Y.script}ac=null;if(U.template){ac=new E(U)}else{ac=new A(U)}aa[N].instance=ac;ab.push(ac)}}for(N in aa){if(aa.hasOwnProperty(N)){var V=[];Y=aa[N];if(Y.dependencies){for(var T=0;T<Y.dependencies.length;T++){var R=Y.dependencies[T];var Q=aa[R].instance;V.push(Q)}ac=Y.instance;ac.setDependencies(V.concat(ac.getDependencies()))}}}return ab};var G="2";var k="3";var w="4";var t="5";function r(T,U){var V=T.pageVars;var R=[];for(var N in V){if(V.hasOwnProperty(N)){var O=V[N];var W=U[N];if(W){var P;var Q={name:W.name,value:W.value};switch(W.type){case G:P=new M(Q);break;case k:P=new u(Q);break;case w:P=new v(Q);break;case t:P=new z(Q);break;default:P=new D(Q)}var S={token:O.token};if(O.defaultValue){S.defaultValue=O.defaultValue}if(P){S.variable=P}R.push(S)}}}return R}var j="1";var p="2";var s="3";var B=function(O){var N=parseInt(O.patternType,10);if((N<10)||(N===100)){return j}if((N>=10)&&(N<20)){return p}if(N===110){return s}};function L(S,U){var Q=[];for(var P=0;P<S.length;P++){var R=S[P];var O=m.indexInArray(R.scriptLoaderKeys,U);if(O!==-1){var T=false;switch(B(R)){case j:case p:break;case s:T=true;break}if(T||R.starter||typeof(R.pattern)==="function"){R.instance=new J({include:(+R.filterType===1),name:R.name,customStarter:R.starter,customScript:R.pattern})}else{R.instance=new H({include:(+R.filterType===1),name:R.name,patternType:q(R),pattern:R.pattern})}if(R.priority!==undefined){R.instance.config.order=+R.priority}Q.push(R.instance)}}var N=function(W,V){return +W.priority>+V.priority};return Q.sort(N)}var o="1";var C="2";var F="3";var K="4";var n="100";var y="110";function q(N){switch(N.patternType){case n:case y:return null;case K:case"1"+K:return I.MATCHES_EXACTLY;case C:case"1"+C:return I.CONTAINS;case F:case"1"+F:return I.REGULAR_EXPRESSION;case o:case"1"+o:return I.ALL_URLS;default:return null}}})();(function(){function j(r){return r.replace(/^\s+/,"").replace(/\s+$/,"")}var o={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null},m,n="universal_variable",k=0,q=500,p;o._isArray=function(r){return(Object.prototype.toString.call(r)==="[object Array]")};o._targetChanged=function(s,r,t){var w,u,v;if(t===null){if(r==="null"){return false}else{return true}}else{if(t===undefined){if(r===t){return false}else{return true}}else{w=i.parse(r);u=o._getNested(w,s);v=o._getNested(t,s);return !o._jsonIsEqual(u,v)}}};o._processCallbacks=function(){var r;if(o.early_callbacks&&o.early_callbacks.length>0){for(r=0;r<o.early_callbacks.length;r+=1){o.push(o.early_callbacks[r])}o.early_callbacks=null}};o._keyStringToArr=function(r){r=j(r);if(r===""){return[]}else{r=r.replace(/\[(\w+)\]/g,".$1");r=r.replace(/^\./,"");return r.split(".")}};o._getNested=function(t,s){var r=o._keyStringToArr(s),u;while(r.length>0){u=r.shift();if(t.hasOwnProperty(u)){t=t[u]}else{return}}return t};o._jsonIsEqual=function(s,r){if(typeof s!=="string"){s=i.stringify(s,o._stripEvents)}if(typeof r!=="string"){r=i.stringify(r,o._stripEvents)}return s===r};o._stripEvents=function(r,s){if(r!=="events"){return s}else{return undefined}};o._on=function(s,t){var u,r;u=s.split(":");s=u[0];r=u[1];o.callbacks[s]=o.callbacks[s]||[];if(r){o.callbacks[s].push({keyString:r,func:t})}else{o.callbacks[s].push({func:t})}};o._trigger=function(t,u){var s,r;if(o.callbacks[t]){for(s=0;s<o.callbacks[t].length;s+=1){if(typeof o.callbacks[t][s].func==="function"){r=o.callbacks[t][s].keyString;if(r){if(t==="change"&&o._targetChanged(r,o.currentUV,m)){o.callbacks[t][s].func(u)}}else{o.callbacks[t][s].func(u)}}}}};o._eventsPush=function(r){var s,t;m.events[m.events.length]=r;r.time=r.time||(new Date()).getTime();if(o.callbacks.event){s=0;t=o.callbacks.event.length;for(s;s<t;s+=1){o.callbacks.event[s].func(r)}}r.has_fired=true};o._getUnfiredEvents=function(){var r=0;for(r=0;r<m.events.length;r+=1){if(!m.events[r].has_fired){o.unfired_events.push(m.events.splice(r,1)[0]);r-=1}}};o._fireEvents=function(){while(o.unfired_events.length>0){m.events.push(o.unfired_events.shift())}};o._resetEventsPush=function(){m.events=m.events||[];if(m.events.push.toString().indexOf("[native code]")!==-1){m.events.push=o._eventsPush;o._getUnfiredEvents();o._fireEvents()}};o._checkForChanges=function(){if(o.callbacks.change&&o.callbacks.change.length>0){if(!o._jsonIsEqual(o.currentUV,m)){o._trigger("change",m);o.currentUV=i.stringify(m,o._stripEvents)}}};o._setUVLocation=function(r){n=r;o._initUV()};o._initUV=function(){window[n]=window[n]||{events:[]};m=window[n];if(!m.events){m.events=[]}};o.push=function(r){if(!o._isArray(r)){return}if(r[0]==="on"){o._on(r[1],r[2])}else{if(r[0]==="trigger"&&r[1]){o._trigger(r[1])}}};o.init=function(s,r){if(r){n=r}o._initUV();if(!window.uv_listener||o._isArray(window.uv_listener)){o.early_callbacks=window.uv_listener||null;window.uv_listener=o;if(!s){o.start()}}else{if(r){window.uv_listener._setUVLocation(n)}}};o.start=function(){o.currentUV=i.stringify(m,o._stripEvents);p=setInterval(function(){o._initUV();o._resetEventsPush();o._checkForChanges()},q);o._processCallbacks()};g.html.UVListener=o}());(function(){var t=[],D={},y={},z=false,r="",m="Opentag",u="",A=0,C=false,o=1000,v=null,p=false,w="",s=null;var r="61641";
var u="327732";var t=[{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673144,scriptLoaderKeys:["6512656"]},{filterType:"1",name:"JQuery Exists and Document Loaded",patternType:"100",pattern:function(G){return(true)},starter:function(I,G){var H=function(){if(window.jQuery){jQuery(G)}else{setTimeout(H,100)}};H()},priority:1,id:42673157,scriptLoaderKeys:["18849923"]},{filterType:"1",name:"Is Confirmation Page",patternType:"2",pattern:"shoppingCartConfirmation",priority:1,id:42673163,scriptLoaderKeys:["18849924"]},{filterType:"2",name:"not confirmation page",patternType:"2",pattern:"shoppingCartConfirmation",priority:2,id:42673166,scriptLoaderKeys:["18849936"]},{filterType:"1",name:"all",patternType:"1",pattern:"",priority:1,id:42673181,scriptLoaderKeys:["18849936"]},{filterType:"2",name:"Exclude mobile site",patternType:"3",pattern:"^(http|https)://m\\.aldoshoes\\.com/mt/",priority:1,id:42673183,scriptLoaderKeys:["21793842"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:2,id:42673187,scriptLoaderKeys:["21793842"]},{filterType:"1",name:"Default filter: Match all",patternType:"100",pattern:function(G){return(/opentag_debug/i.test(window.location.href)||/opentag_debug_tool/i.test(document.cookie))},starter:function(H,G){G()},priority:1,id:42673192,scriptLoaderKeys:["23933723"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673200,scriptLoaderKeys:["23960552"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673202,scriptLoaderKeys:["23962542"]},{filterType:"1",name:"Default filter: Match all English page",patternType:"3",pattern:"(\\/ca-eng\\/?|\\/eng\\/)",priority:1,id:42673211,scriptLoaderKeys:["24071978"]},{filterType:"1",name:"Default filter: Match all FRE pages",patternType:"3",pattern:"(\\/ca-fre\\/?|\\/fre\\/)",priority:1,id:42673218,scriptLoaderKeys:["24071988"]},{filterType:"1",name:"Default filter: Match all",patternType:"2",pattern:"/mt/",priority:1,id:42673236,scriptLoaderKeys:["24419224"]},{filterType:"1",name:"product pages",patternType:"3",pattern:"(.*)/[0-9]+(.*)/[0-9]+(\\?(.*))?$",priority:1,id:42673277,scriptLoaderKeys:["29695309"]},{filterType:"1",name:"cart page",patternType:"2",pattern:"/cart",priority:1,id:42673310,scriptLoaderKeys:["29699138"]},{filterType:"1",name:"catalog pages",patternType:"3",pattern:"/accessories|/clearance|/handbags|/men|/whatsnew|/sale|/women",priority:1,id:42673319,scriptLoaderKeys:["29699151"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673335,scriptLoaderKeys:["30509984"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673347,scriptLoaderKeys:["30510156"]},{filterType:"1",name:"Default filter: Match all",patternType:"1",pattern:"",priority:1,id:42673348,scriptLoaderKeys:["34472545"]}];var C=false;var D={"-4077713":{name:"Item Price List",value:'(function(){\n  var price_Array = [];\n  var coupon_code_amount = 0;\n  var coupon_code_exist = false;\n  jQuery("#shoppingBagTable td.price").each(function(i,e){\n    price_Array.push(Number(jQuery(e).text().replace("","").replace("$","").replace(",",".").trim()).toFixed(2));\n  });\n  jQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tcoupon_code_amount = (Number(jQuery(this).text().match(/\\d*(\\.|,)\\d*/)[0].replace(",","."))).toFixed(2);\n\t\t\tcoupon_code_amount *= -1;\n\t\t\tprice_Array.push(coupon_code_amount);\n\t\t}\n\t});\n  return price_Array;\n})()',type:"2"},"-4077714":{name:"Item Category List",value:'(function(){\n\t\n\tvar cat = ["NA"];\n\treturn cat;\n\t \n}())',type:"2"},"-4077711":{name:"Item SKU List",value:'(function(){\n  var sku_Array = [];\n  var coupon_code_exist = false;\n  var idPattern = /"([0-9]+)"\\s*\\/\\/\\s*item ID/gi;\n  var colPattern = /cmCreatePageElementTag\\("[^"]+",\\s*"([0-9]+)"\\);/gi;\n  var matchID;\n  var matchColor;\n  var scriptSrc = jQuery("script[language=\'javascript1.2\']:contains(\'cmCreateShopAction9Tag\')").text();\n  matchID = idPattern.exec(scriptSrc);\n  matchColor = colPattern.exec(scriptSrc);\n  while (matchID && matchColor){\n    sku_Array.push(matchID[1] + "_" + matchColor[1]);\n    matchID = idPattern.exec(scriptSrc);\n    matchColor = colPattern.exec(scriptSrc);\n  }\n  \tjQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\t\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tsku_Array.push("9") ;\t//  Sku ID=9 discount \n\t\t}\n\n\t});\n  return sku_Array;\n})()',type:"2"},"-4077710":{name:"Currency",value:'(function(){\n  if (/ckey=CA/.test(document.location.search)) return "CAD";\n  if (/ckey=(GB|UK)/.test(document.location.search)) return "GBP";\n  return "USD";\n}())',type:"2"},"-4077704":{name:"Web Property ID",value:"UA-49129446-4",type:"1"},"-4077705":{name:"Order ID",value:"orderID",type:"3"},"-4077707":{name:"Revenue",value:'(function(){\nvar revenue;\nvar coupon_code_amount=0;\nvar coupon_code_exist = false;\nrevenue=(Number(jQuery("#totalsCol label:contains(-total)").next().text().trim().match(/[0-9|.|,]+/g)[0].replace(/,/,"."))).toFixed(2);\njQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\t\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tcoupon_code_amount = (Number(jQuery(this).text().match(/\\d*(\\.|,)\\d*/)[0].replace(",","."))).toFixed(2);\n\t\t\tcoupon_code_amount *=-1;\n\t\t}\n\t});\n\treturn Number(revenue) + Number(coupon_code_amount);\n})()',type:"2"},"-4077716":{name:"Item Quantities List",value:'(function(){\n  var qty_Array = [];\n  var coupon_code_exist = false;\n  jQuery("td.quantity").each(function(i,e){\n    qty_Array.push(Number(jQuery(e).text().trim()).toFixed());\n  });\n  jQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tqty_Array.push(1);\n\t\t}\n\t});\n  return qty_Array;\n})()',type:"2"},"-4077709":{name:"Tax Value",value:'(function(){\n\t\n\tvar tax;\n\tvar tax_array = [];\n\tvar label;\n\n\t jQuery("#confirmationSummaryBlock #totalsCol label").each(function(){\n\t \tlabel = jQuery(this).text();\n\t \t\n\t \tif (label === "HST" || label === "GST/TPS" || label === "QST/TVQ"){\n\t \t\ttax = jQuery(this).parent().find(".value").text().trim();\n\t \t\ttax_array.push(tax);\n\t \t\t\n\t \t}\n\t \t\n\t });\n\treturn tax_array;\n\t \n}())',type:"2"},"-4077706":{name:"Store Name",value:"Call It Spring CA",type:"1"},"-4077715":{name:"Site URL",value:'(function() {\n  var url = window.location.href;\n\n  if(url.indexOf(\'m.callitspring.com\')>-1) {\n    return "m.callitspring.com";\n  }else{\n\treturn "callitspring.com";\n\t}\n})()',type:"2"},"-4077708":{name:"Shipping Cost",value:'(function(){\n\tvar shipping=0;\n\tvar shipping_exist=false;\n\tvar shipping_pattern=/(((\\$|)\\s?(\\d+))|((\\d+)\\s?(\\$|)))/;\n\tvar label;\n\n\t jQuery("#confirmationSummaryBlock #totalsCol label").each(function(){\n\t \tlabel = jQuery(this).text().trim();\n\t \t//console.log(label);\n\t \tif (label === "shipping" || label === "envoi"){\n\t\t\tshipping_exist =  jQuery(this).parent().find(".value").text().trim().match(shipping_pattern);\n\t\t\tif (shipping_exist){\n\t\t\t\tshipping = Number(jQuery(this).parent().find(".value").text().trim().match(shipping_pattern)[0].replace("$","").replace("" ,"").trim()).toFixed(2);\n\t \t\t};\n\t \t};\n\t });\n\treturn shipping;\n})()',type:"2"},"-4077712":{name:"Item Name List",value:'(function(){\n  var name_Array = [];\n  var coupon_code_exist=false;\n  var coupon_code_description;\n\n  jQuery("#shoppingBagTable tr .style a").each(function(){\n  \tname_Array.push(jQuery(this).text()); \n  });\n\n  jQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\t\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tcoupon_code_description = jQuery(this).parent().find("label").text().trim();\n\t\t\tname_Array.push(coupon_code_description) ;\n\t\t}\n\t});\n  return name_Array;\n})()',type:"2"},"-4077717":{name:"Web Property ID",value:"UA-49129446-4",type:"1"},"-4077718":{name:"Site URL",value:'(function() {\n  var url = window.location.href;\n\n  if(url.indexOf(\'m.callitspring.com\')>-1) {\n    return "m.callitspring.com";\n  }else{\n\treturn "callitspring.com";\n\t}\n})()',type:"2"},"-1413532":{name:"BV_Transaction_Order_ID",value:"orderID",type:"3"},"-1413533":{name:"BV_Client_Code_CA_FRE",value:"11225-fr_ca",type:"1"},"-1413541":{name:"BV_Product_Quantity_List",value:'(function(){\n  var qty_Array = [];\n  var coupon_code_exist = false;\n  jQuery("td.quantity").each(function(i,e){\n    qty_Array.push(Number(jQuery(e).text().trim()).toFixed());\n  });\n  jQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tqty_Array.push(1);\n\t\t}\n\t});\n  return qty_Array;\n})()',type:"2"},"-1413547":{name:"BV_Transaction_Shipping_Address_Country",value:"CANADA",type:"1"},"-1413544":{name:"BV_Transaction_Shipping_Address_State",value:'(function () {\n\tvar cmOrderTag_exist=false;\n\tvar cmScriptPattern=/cmCreateOrderTag/;\n\tvar cmTag;\n\tvar cmState;\n\tvar scriptSrc=jQuery("script[language=\'javascript1.2\']:contains(\'cmCreateOrderTag\')").text();\n\tscriptSrc.split(";").forEach( function(s) {\n\t\tcmOrderTag_exist=cmScriptPattern.test(s);\n\t\tif (typeof(cmOrderTag_exist) !== "undefined" && cmOrderTag_exist) {\n\t\t\tcmTag=s.split(",");\n\t\t\tcmState=cmTag[5].trim().replace(/(\\")+/g,"");\n\t\t}\n  });\n  return cmState;\n}())',type:"2"},"-1413540":{name:"BV_Transaction_Order_Shipping",value:'(function(){\n\tvar shipping=0;\n\tvar shipping_exist=false;\n\tvar shipping_pattern=/(((\\$|)\\s?(\\d+))|((\\d+)\\s?(\\$|)))/;\n\tvar label;\n\n\t jQuery("#confirmationSummaryBlock #totalsCol label").each(function(){\n\t \tlabel = jQuery(this).text().trim();\n\t \t//console.log(label);\n\t \tif (label === "shipping" || label === "envoi"){\n\t\t\tshipping_exist =  jQuery(this).parent().find(".value").text().trim().match(shipping_pattern);\n\t\t\tif (shipping_exist){\n\t\t\t\tshipping = Number(jQuery(this).parent().find(".value").text().trim().match(shipping_pattern)[0].replace("$","").replace("" ,"").trim()).toFixed(2);\n\t \t\t};\n\t \t};\n\t });\n\treturn shipping;\n})()',type:"2"},"-1413542":{name:"BV_Product_Price_List",value:'(function(){\n  var price_Array = [];\n  var coupon_code_amount = 0;\n  var coupon_code_exist = false;\n  jQuery("#shoppingBagTable td.price").each(function(i,e){\n    price_Array.push(Number(jQuery(e).text().replace("","").replace("$","").replace(",",".").trim()).toFixed(2));\n  });\n  jQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tcoupon_code_amount = (Number(jQuery(this).text().match(/\\d*(\\.|,)\\d*/)[0].replace(",","."))).toFixed(2);\n\t\t\tcoupon_code_amount *= -1;\n\t\t\tprice_Array.push(coupon_code_amount);\n\t\t}\n\t});\n  return price_Array;\n})()',type:"2"},"-1413545":{name:"BV_Transaction_Shipping_Address_City",value:'(function () {\n\tvar cmOrderTag_exist=false;\n\tvar cmScriptPattern=/cmCreateOrderTag/;\n\tvar cmTag;\n\tvar cmCity;\n\tvar scriptSrc=jQuery("script[language=\'javascript1.2\']:contains(\'cmCreateOrderTag\')").text();\n\tscriptSrc.split(";").forEach( function(s) {\n\t\tcmOrderTag_exist=cmScriptPattern.test(s);\n\t\tif (typeof(cmOrderTag_exist) !== "undefined" && cmOrderTag_exist) {\n\t\t\tcmTag=s.split(",");\n\t\t\tcmCity=cmTag[4].trim().replace(/(\\")+/g,"");\n\t\t}\n  });\n  return cmCity;\n}())',type:"2"},"-1413535":{name:"BV_Client_Code_CA_ENG",value:"11225-en_ca",type:"1"},"-1413548":{name:"BV_User_Language",value:'(function () {\n\n\tvar currentPageUrl = "";\n\tvar languagePattern=/(\\/ca-fre\\/?|\\/fre\\/)/;\n\tif (typeof this.href != "undefined") {\n\t\t   currentPageUrl = this.href.toString().toLowerCase(); \n\t}else{ \n\t\t   currentPageUrl = document.location.toString().toLowerCase();\n\t}\n\tif (languagePattern.test(currentPageUrl) && languagePattern.test(currentPageUrl)!=="undefined") {\n\t\treturn "fr_ca";\n\t}else { \n\t\t\t\treturn "en_ca";\n\t\t\t}\n}())',type:"2"},"-1413539":{name:"BV_Transaction_Order_Tax",value:'(function(){\n\t\n\tvar tax=0;\n\tvar label;\n\n\t jQuery("#confirmationSummaryBlock #totalsCol label").each(function(){\n\t \tlabel = jQuery(this).text();\n\t \t\n\t \tif (label === "HST" || label === "GST/TPS" || label === "QST/TVQ"){\n\t \t\ttax += (Number(jQuery(this).parent().find(".value").text().trim().replace("$","").replace("", "").replace(",","."))).toFixed(2)/1;\n\t \t}\n\t \t\n\t });\n\treturn tax;\n\t \n}())',type:"2"},"-1413534":{name:"BV_Transaction_Order_ID",value:"orderID",type:"3"},"-1413543":{name:"BV_Display_Code",value:"display-stg.ugc",type:"1"},"-1413537":{name:"BV_Product_SKU_List",value:'(function(){\n  var sku_Array = [];\n  var coupon_code_exist = false;\n  var idPattern = /"([0-9]+)"\\s*\\/\\/\\s*item ID/gi;\n  var colPattern = /cmCreatePageElementTag\\("[^"]+",\\s*"([0-9]+)"\\);/gi;\n  var matchID;\n  var matchColor;\n  var scriptSrc = jQuery("script[language=\'javascript1.2\']:contains(\'cmCreateShopAction9Tag\')").text();\n  matchID = idPattern.exec(scriptSrc);\n  matchColor = colPattern.exec(scriptSrc);\n  while (matchID && matchColor){\n    sku_Array.push(matchID[1] + "_" + matchColor[1]);\n    matchID = idPattern.exec(scriptSrc);\n    matchColor = colPattern.exec(scriptSrc);\n  }\n  \tjQuery("#confirmationSummaryBlock #totalsCol .formRow .value").each(function(){\n\t\tcoupon_code_exist = jQuery(this).text().trim().match(/(^-\\$|\\$\\)$|^-)/);\n\t\tif(coupon_code_exist){\n\t\t\tsku_Array.push("9") ;\t//  Sku ID=9 discount \n\t\t}\n\n\t});\n  return sku_Array;\n})()',type:"2"},"-1413546":{name:"BV_Transaction_Order_Currency",value:"CAD",type:"1"},"-1413538":{name:"BV_Transaction_Order_Total",value:'(function () {\n  return Number(jQuery("#totalsCol .formRow.totalRow .value").text().match(/\\d*(\\.|,)\\d*/)[0].replace("","").replace("$","").replace(",",".").trim()).toFixed(2)/1;\n}())',type:"2"},"-1413536":{name:"BV_User_Email",value:'(function () {\n\tvar cmOrderTag_exist=false;\n\tvar cmScriptPattern=/cmCreateOrderTag/;\n\tvar cmTag;\n\tvar cmUserID;\n\tvar scriptSrc=jQuery("script[language=\'javascript1.2\']:contains(\'cmCreateOrderTag\')").text();\n\tscriptSrc.split(";").forEach( function(s) {\n\t\tcmOrderTag_exist=cmScriptPattern.test(s);\n\t\tif (typeof(cmOrderTag_exist) !== "undefined" && cmOrderTag_exist) {\n\t\t\tcmTag=s.split(",");\n\t\t\tcmUserID=cmTag[3].trim().replace(/(\\")+/g,"").split(" ")[0].trim();\n\t\t}\n  });\n  return cmUserID;\n}())',type:"2"},"-4077719":{name:"Web Property ID",value:"UA-49129446-4",type:"1"},"-4077726":{name:"Item SKU List",value:"(function() { return []; })()",type:"2"},"-4077720":{name:"Order ID",value:"orderID",type:"3"},"-4077731":{name:"Item Quantities List",value:"(function() { return []; })()",type:"2"},"-4077725":{name:"Currency",value:'(function(){\n  if (/ckey=CA/.test(document.location.search)) return "CAD";\n  if (/ckey=(GB|UK)/.test(document.location.search)) return "GBP";\n  return "USD";\n}())',type:"2"},"-4077724":{name:"Tax Value",value:"",type:"1"},"-4077723":{name:"Shipping Cost",value:"",type:"1"},"-4077722":{name:"Revenue",value:'parseFloat(document.querySelectorAll("#totalsCol > div:nth-child(2) .un_fright")[0].innerHTML.replace("$",""),10)',type:"2"},"-4077729":{name:"Item Category List",value:"(function() { return []; })()",type:"2"},"-4077721":{name:"Store Name",value:"CallitSpring CA MOBILE",type:"1"},"-4077730":{name:"Site URL",value:'(function() {\n  var url = window.location.href;\n\n  if(url.indexOf(\'m.callitspring.com\')>-1) {\n    return "m.callitspring.com";\n  }else{\n\treturn "callitspring.com";\n\t}\n})()',type:"2"},"-4077728":{name:"Item Price List",value:"(function() { return []; })()",type:"2"},"-4077727":{name:"Item Name List",value:"(function() { return []; })()",type:"2"},"-4077734":{name:"Type",value:"Remar0",type:"1"},"-4077732":{name:"Category",value:"Remar0",type:"1"},"-4077733":{name:"Double Click Id",value:"4532420",type:"1"},"-4077735":{name:"Category",value:'(function(){\n  if(document.URL.indexOf("/accessories")>0)\n    return "Remar002";\n  if(document.URL.indexOf("/clearance")>0)\n    return "Remar004";\n  if(document.URL.indexOf("/handbags")>0)\n    return "Remar001";\n  if(document.URL.indexOf("/men")>0)\n    return "httpw0";\n  if(document.URL.indexOf("/whatsnew")>0)\n    return "Remar00";\n  if(document.URL.indexOf("/sale")>0)\n    return "Remar003";\n  if(document.URL.indexOf("/women")>0)\n    return "Remar000";\n})()',type:"2"},"-4077736":{name:"Double Click Id",value:"4532420",type:"1"},"-4077737":{name:"Type",value:"Remar0",type:"1"},"-4077738":{name:"Category",value:'(function() {\n\tvar price = document.getElementsByClassName("swatchesInfo")[0].children[2].innerHTML;\n\tprice = Number(price.replace("$","").trim().replace(",","."));\n\tif(price <= 19.99)\n\t\treturn "Remar00I";\n\tif(price >= 20 && price <= 39.99)\n\t\treturn "Remar00J";\n\tif(price >= 40 && price <= 59.99)\n\t\treturn "Remar00K";\n\tif(price >= 60 && price <= 79.99)\n\t\treturn "Remar00L";\n\tif(price >= 80 && price <= 99.99)\n\t\treturn "Remar00M";\n\tif(price >= 100 && price <= 124.99)\n\t\treturn "Remar00N";\n\tif(price >= 125 && price <= 149.99)\n\t\treturn "Remar00O";\n\tif(price >= 150)\n\t\treturn "Remar00P";\n})()',type:"2"},"-4077740":{name:"Type",value:"Remar0",type:"1"},"-4077739":{name:"Double Click Id",value:"4532420",type:"1"},"-4077742":{name:"Double Click Id",value:"4532420",type:"1"},"-4077743":{name:"Type",value:"Remar0",type:"1"},"-4077741":{name:"Category",value:'(function(){\n  if(document.URL.indexOf("/accessories")>0)\n    return "Remar009";\n  if(document.URL.indexOf("/clearance")>0)\n    return "Remar00A";\n  if(document.URL.indexOf("/handbags")>0)\n    return "Remar008";\n  if(document.URL.indexOf("/men")>0)\n    return "Remar007";\n  if(document.URL.indexOf("/whatsnew")>0)\n    return "Remar005";\n  if(document.URL.indexOf("/sale")>0)\n    return "Remar00-";\n  if(document.URL.indexOf("/women")>0)\n    return "Remar006";\n})()',type:"2"},"-4077744":{name:"Category",value:'(function() {\n\tvar price = document.getElementsByClassName("swatchesInfo")[0].children[2].innerHTML;\n\tprice = Number(price.replace("$","").trim().replace(",","."));\n\tif(price <= 19.99)\n\t\treturn "Remar00Q";\n\tif(price >= 20 && price <= 39.99)\n\t\treturn "Remar00R";\n\tif(price >= 40 && price <= 59.99)\n\t\treturn "Remar00S";\n\tif(price >= 60 && price <= 79.99)\n\t\treturn "Remar00T";\n\tif(price >= 80 && price <= 99.99)\n\t\treturn "Remar00U";\n\tif(price >= 100 && price <= 124.99)\n\t\treturn "Remar00V";\n\tif(price >= 125 && price <= 149.99)\n\t\treturn "Remar00W";\n\tif(price >= 150)\n\t\treturn "Remar00X";\n})()',type:"2"},"-4077745":{name:"Double Click Id",value:"4532420",type:"1"},"-4077746":{name:"Type",value:"Remar0",type:"1"},"-1413552":{name:"Double Click Type",value:"Remar0",type:"1"},"-1413551":{name:"Double Click ID",value:"4532420",type:"1"},"-1413549":{name:"Category Cart Pages",value:'(function(){\n  if(document.URL.indexOf("/accessories")>0)\n    return "Remar009";\n  if(document.URL.indexOf("/clearance")>0)\n    return "Remar00A";\n  if(document.URL.indexOf("/handbags")>0)\n    return "Remar008";\n  if(document.URL.indexOf("/men")>0)\n    return "Remar007";\n  if(document.URL.indexOf("/whatsnew")>0)\n    return "Remar005";\n  if(document.URL.indexOf("/sale")>0)\n    return "Remar00-";\n  if(document.URL.indexOf("/women")>0)\n    return "Remar006";\n})()',type:"2"},"-1413550":{name:"Category Cart Prices",value:'(function() {\n\tvar price = document.getElementsByClassName("swatchesInfo")[0].children[2].innerHTML;\n\tprice = Number(price.replace("$","").trim().replace(",","."));\n\tif(price <= 19.99)\n\t\treturn "Remar00Q";\n\tif(price >= 20 && price <= 39.99)\n\t\treturn "Remar00R";\n\tif(price >= 40 && price <= 59.99)\n\t\treturn "Remar00S";\n\tif(price >= 60 && price <= 79.99)\n\t\treturn "Remar00T";\n\tif(price >= 80 && price <= 99.99)\n\t\treturn "Remar00U";\n\tif(price >= 100 && price <= 124.99)\n\t\treturn "Remar00V";\n\tif(price >= 125 && price <= 149.99)\n\t\treturn "Remar00W";\n\tif(price >= 150)\n\t\treturn "Remar00X";\n})()',type:"2"},"-1413556":{name:"Double Click Type",value:"Remar0",type:"1"},"-1413554":{name:"Adviso - Category Checkout Pages",value:'(function() {\n\tvar list = document.getElementsByTagName("tbody")[0];\n\tvar rows = list.children;\n\tvar categ = [];\n\tfor (var i = 0; i < rows.length; i++) {\n\t\tif (rows[i].tagName == "TR") {\n\t\t\tvar addr = rows[i].children[1].children[0].href;\n\n\t\t\tif (addr.indexOf("/accessories") > 0)\n\t\t\t\tcateg.push("Remar00F");\n\t\t\tif (addr.indexOf("/clearance") > 0)\n\t\t\t\tcateg.push("Remar00H");\n\t\t\tif (addr.indexOf("/handbags") > 0)\n\t\t\t\tcateg.push("Remar00E");\n\t\t\tif (addr.indexOf("/men") > 0)\n\t\t\t\tcateg.push("Remar00D");\n\t\t\tif (addr.indexOf("/whatsnew") > 0)\n\t\t\t\tcateg.push("Remar00B");\n\t\t\tif (addr.indexOf("/sale") > 0)\n\t\t\t\tcateg.push("Remar00G");\n\t\t\tif (addr.indexOf("/women") > 0)\n\t\t\t\tcateg.push("Remar00C");\n\t\t}\n\t}\n\treturn categ;\n})()',type:"2"},"-1413555":{name:"Double Click ID",value:"4532420",type:"1"},"-1413553":{name:"Adviso - Category Checkout Price",value:'(function() {\n\tvar list = document.getElementsByTagName("tbody")[0];\n\tvar rows = list.children;\n\tvar categ = [];\n\tfor (var i = 0; i < rows.length; i++) {\n\t\tif (rows[i].tagName == "TR") {\n\t\t\tvar price = rows[i].children[4].innerHTML;\n\t\t\tprice = Number(price.replace("$","").trim().replace(",","."));\n\n\t\t\tif (price <= 19.99)\n\t\t\t\tcateg.push("Remar00Y");\n\t\t\tif (price >= 20 && price <= 39.99)\n\t\t\t\tcateg.push("Remar00Z");\n\t\t\tif (price >= 40 && price <= 59.99)\n\t\t\t\tcateg.push("Remar00_");\n\t\t\tif (price >= 60 && price <= 79.99)\n\t\t\t\tcateg.push("Remar00a");\n\t\t\tif (price >= 80 && price <= 99.99)\n\t\t\t\tcateg.push("Remar00b");\n\t\t\tif (price >= 100 && price <= 124.99)\n\t\t\t\tcateg.push("Remar00c");\n\t\t\tif (price >= 125 && price <= 149.99)\n\t\t\t\tcateg.push("Remar00d");\n\t\t\tif (price >= 150)\n\t\t\t\tcateg.push("Remar00e");\n\t\t}\n\t}\n\treturn categ;\n})()',type:"2"},"-4077751":{name:"Order ID",value:"orderID",type:"3"},"-4077748":{name:"DoubleClick Tag Type",value:"Conve0",type:"1"},"-4077750":{name:"Order Total",value:'(function() {\n\tvar x = null;\n\tif (document.URL.indexOf("m.callitspring.com") == -1) {\n\t\tx = document.getElementsByClassName("totalRow")[0].children[1].innerHTML;\n\t} else {\n\t\tx = document.getElementById("totalsCol").children;\n\t\tx = x[x.length - 1].children[1].innerHTML;\n\t}\n\tx = Number(x.replace("$", "").trim().replace(",", "."));\n\treturn x;\n})()',type:"2"},"-4077747":{name:"DoubleClick ID",value:"4532420",type:"1"},"-4077752":{name:"Custom Parameters",value:'(function() {\n\tvar params = "";\n\n\t// subtotal\n\tparams += "u1="\n\t\t\t+ (function() {\n\t\t\t\tvar x = document.getElementById("totalsCol").children[1].children[1].innerHTML;\n\t\t\t\tx = Number(x.replace("$", "").trim().replace(",", "."));\n\t\t\t\treturn x;\n\t\t\t})() + ";";\n\n\t// product sku\n\tparams += "u2="\n\t\t\t+ (function() {\n\t\t\t\tvar prodz = document.getElementsByTagName("tbody")[0].children;\n\t\t\t\tvar skuz = [];\n\t\t\t\tfor (var i = 0; i < prodz.length; i++) {\n\t\t\t\t\tvar style = prodz[i].children[0].children[0].href;\n\t\t\t\t\tstyle = style.substring(style.indexOf("itemID=") + 7);\n\t\t\t\t\tstyle = style.substring(0, style.indexOf("&"));\n\t\t\t\t\tvar color = prodz[i].children[0].children[0].children[0].src;\n\t\t\t\t\tcolor = color.substring(color.lastIndexOf("/"), color\n\t\t\t\t\t\t\t.lastIndexOf("_"));\n\t\t\t\t\tcolor = color.substring(color.lastIndexOf("_"))\n\t\t\t\t\tskuz.push(style + color);\n\t\t\t\t}\n\t\t\t\treturn skuz;\n\t\t\t})() + ";";\n\n\t// promo description\n\tparams += "u3=" + (function() {\n\t\tvar label = "";\n\t\tjQuery("#confirmationSummaryBlock #totalsCol label").each(function() {\n\t\t\tvar tmp = jQuery(this).text().trim();\n\t\t\tif (tmp.indexOf("$") >= 0 || tmp.indexOf("%") >= 0) {\n\t\t\t\tlabel = tmp;\n\t\t\t}\n\t\t});\n\t\treturn label;\n\t})() + ";";\n\n\t// product quantity\n\tparams += "u4=" + (function() {\n\t\tvar prodz = document.getElementsByTagName("tbody")[0].children;\n\t\tvar quantz = [];\n\t\tfor (var i = 0; i < prodz.length; i++) {\n\t\t\tvar quant = prodz[i].children[5].innerHTML;\n\t\t\tquantz.push(Number(quant.trim()));\n\t\t}\n\t\treturn quantz;\n\t})() + ";";\n\n\t// product price\n\tparams += "u5="\n\t\t\t+ (function() {\n\t\t\t\tvar prodz = document.getElementsByTagName("tbody")[0].children;\n\t\t\t\tvar prices = [];\n\t\t\t\tfor (var i = 0; i < prodz.length; i++) {\n\t\t\t\t\tvar price = prodz[i].children[4].innerHTML;\n\t\t\t\t\tprices.push(Number(price.replace("$", "").trim().replace(\n\t\t\t\t\t\t\t",", ".")));\n\t\t\t\t}\n\t\t\t\treturn prices;\n\t\t\t})();\n\n\treturn params;\n})()',type:"2"},"-4077749":{name:"DoubleClick Tag Category",value:"conve0",type:"1"},"-4077753":{name:"Country Code",value:"en_US",type:"1"},"-4077755":{name:"Order Total",value:'(function() {\n\tvar x = null;\n\tif (document.URL.indexOf("m.callitspring.com") == -1) {\n\t\tx = document.getElementsByClassName("totalRow")[0].children[1].innerHTML;\n\t} else {\n\t\tx = document.getElementById("totalsCol").children;\n\t\tx = x[x.length - 1].children[1].innerHTML;\n\t}\n\tx = Number(x.replace("$", "").trim().replace(",", "."));\n\treturn x;\n})()',type:"2"},"-4077754":{name:"Pixel ID",value:"6022039867980",type:"1"},"-4077756":{name:"Order Currency",value:"CAD",type:"1"},"-4077757":{name:"Country Code",value:"en_US",type:"1"},"-4077759":{name:"Order Total",value:"0.00",type:"1"},"-4077758":{name:"Pixel ID",value:"151854288318537",type:"1"},"-4077760":{name:"Order Currency",value:"CAD",type:"1"}};
var y={6512656:{id:"6512656",name:"Google Search Remarketing Pixel",disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<!-- Google Code for Main tag -->\x0A<!-- Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. For instructions on adding this tag and more information on the above requirements, read the setup guide: google.com/ads/remarketingsetup -->\x0A<script type=\x22text/javascript\x22>\x0A/* <![CDATA[ */\x0Avar google_conversion_id = 1028214946;\x0Avar google_conversion_label = \x22UKW1CJ6FpwQQoqGl6gM\x22;\x0Avar google_custom_params = window.google_tag_params;\x0Avar google_remarketing_only = true;\x0A/* ]]> */\x0A<\/script>\x0A<script type=\x22text/javascript\x22 src=\x22//www.googleadservices.com/pagead/conversion.js\x22>\x0A<\/script>\x0A<noscript>\x0A<div style=\x22display:inline;\x22>\x0A<img height=\x221\x22 width=\x221\x22 style=\x22border-style:none;\x22 alt=\x22\x22 src=\x22//googleads.g.doubleclick.net/pagead/viewthroughconversion/1028214946/?value=0&amp;label=UKW1CJ6FpwQQoqGl6gM&amp;guid=ON&amp;script=0\x22/>\x0A</div>\x0A</noscript>\x0A",locationId:2,positionId:2,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},18849923:{id:"18849923",name:"Rule - JQuery and Document Loaded",disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},18849924:{id:"18849924",name:"Rule - Confirmation Page",disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},18849936:{id:"18849936",name:"Rule - not Confirmation Page",disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},21793842:{id:"21793842",name:"Rule - Not on Mobile",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},23933723:{id:"23933723",name:"RULE : DEBUG MODE",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},23960552:{id:"23960552",name:"BazaaVoice - Confirmation Page - FRE",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"\x0A<!-- load bvpai.js -->\x0A<script type=\x22text/javascript\x22\x0Asrc=\x22//${BV_Display_Code}.bazaarvoice.com/static/${BV_Client_Code_CA_FRE}/bvapi.js\x22>\x0A<\/script>\x0A\x0A<!-- tagging code -->\x0A<script type=\x22text/javascript\x22>\x0A(function () {\x0A  var data = {\x0A		\x22orderId\x22: \x22${BV_Transaction_Order_ID}\x22,\x0A		\x22tax\x22: \x22${BV_Transaction_Order_Tax}\x22,\x0A		\x22shipping\x22: \x22${BV_Transaction_Order_Shipping}\x22,\x0A		\x22total\x22: \x22${BV_Transaction_Order_Total}\x22,\x0A		\x22city\x22: \x22${BV_Transaction_Shipping_Address_City}\x22,\x0A		\x22state\x22: \x22${BV_Transaction_Shipping_Address_State}\x22,\x0A		\x22country\x22: \x22${BV_Transaction_Shipping_Address_Country}\x22,\x0A		\x22currency\x22: \x22${BV_Transaction_Order_Currency}\x22,\x0A		\x22locale\x22: \x22${BV_User_Language}\x22,\x0A		\x22email\x22: \x22${BV_User_Email}\x22,\x0A		\x22items\x22: []\x0A  };\x0A\x0A  for (var i = 0; i < \x22${BV_Product_SKU_List}\x22.length; i++) {\x0A    data.items.push({\x0A		\x22sku\x22: \x22${BV_Product_SKU_List}\x22[i],\x0A		\x22quantity\x22: \x22${BV_Product_Quantity_List}\x22[i],\x0A		\x22price\x22: \x22${BV_Product_Price_List}\x22[i]\x0A    });\x0A  }\x0A\x0A  $BV.SI.trackTransactionPageView(data);\x0A})();\x0A\x0A<\/script>",locationId:2,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{"-1413532":{token:"BV_Transaction_Order_ID",defaultValue:""},"-1413533":{token:"BV_Client_Code_CA_FRE",defaultValue:""}},dependencies:[18849923,18849924,21793842,23933723,24071988]},23962542:{id:"23962542",name:"BazaaVoice - Confirmation Page - ENG",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"\x0A<!-- load bvpai.js -->\x0A<script type=\x22text/javascript\x22\x0Asrc=\x22//${BV_Display_Code}.bazaarvoice.com/static/${BV_Client_Code_CA_ENG}/bvapi.js\x22>\x0A<\/script>\x0A\x0A<!-- tagging code -->\x0A<script type=\x22text/javascript\x22>\x0A(function () {\x0A  var data = {\x0A		\x22orderId\x22: \x22${BV_Transaction_Order_ID}\x22,\x0A		\x22tax\x22: \x22${BV_Transaction_Order_Tax}\x22,\x0A		\x22shipping\x22: \x22${BV_Transaction_Order_Shipping}\x22,\x0A		\x22total\x22: \x22${BV_Transaction_Order_Total}\x22,\x0A		\x22city\x22: \x22${BV_Transaction_Shipping_Address_City}\x22,\x0A		\x22state\x22: \x22${BV_Transaction_Shipping_Address_State}\x22,\x0A		\x22country\x22: \x22${BV_Transaction_Shipping_Address_Country}\x22,\x0A		\x22currency\x22: \x22${BV_Transaction_Order_Currency}\x22,\x0A		\x22locale\x22: \x22${BV_User_Language}\x22,\x0A		\x22email\x22: \x22${BV_User_Email}\x22,\x0A		\x22items\x22: []\x0A  };\x0A\x0A  for (var i = 0; i < \x22${BV_Product_SKU_List}\x22.length; i++) {\x0A    data.items.push({\x0A		\x22sku\x22: \x22${BV_Product_SKU_List}\x22[i],\x0A		\x22quantity\x22: \x22${BV_Product_Quantity_List}\x22[i],\x0A		\x22price\x22: \x22${BV_Product_Price_List}\x22[i]\x0A    });\x0A  }\x0A\x0A  $BV.SI.trackTransactionPageView(data);\x0A})();\x0A\x0A<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{"-1413534":{token:"BV_Transaction_Order_ID",defaultValue:""},"-1413535":{token:"BV_Client_Code_CA_ENG",defaultValue:""},"-1413536":{token:"BV_User_Email",defaultValue:""},"-1413537":{token:"BV_Product_SKU_List",defaultValue:""},"-1413538":{token:"BV_Transaction_Order_Total",defaultValue:""},"-1413539":{token:"BV_Transaction_Order_Tax",defaultValue:""},"-1413540":{token:"BV_Transaction_Order_Shipping",defaultValue:""},"-1413541":{token:"BV_Product_Quantity_List",defaultValue:""},"-1413542":{token:"BV_Product_Price_List",defaultValue:""},"-1413543":{token:"BV_Display_Code",defaultValue:""},"-1413544":{token:"BV_Transaction_Shipping_Address_State",defaultValue:""},"-1413545":{token:"BV_Transaction_Shipping_Address_City",defaultValue:""},"-1413546":{token:"BV_Transaction_Order_Currency",defaultValue:""},"-1413547":{token:"BV_Transaction_Shipping_Address_Country",defaultValue:""},"-1413548":{token:"BV_User_Language",defaultValue:""}},dependencies:[18849923,18849924,21793842,23933723,24071978]},24071978:{id:"24071978",name:"Rule - ENG Pages",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},24071988:{id:"24071988",name:"Rule - FRE Pages",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},24419224:{id:"24419224",name:"Rule - Mobile Site",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},29695309:{id:"29695309",name:"Rule - Product Pages",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[29699151]},29699138:{id:"29699138",name:"Rule - Cart Page",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},29699151:{id:"29699151",name:"Rule - Catalog Pages",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<script>;<\/script>",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]},30509984:{id:"30509984",name:"Facebook Conversion",scriptTimeout:5000,template:true,prePostWindowScope:true,disabled:false,dedupe:false,pre:"var fb_param = {};\x0Afb_param.pixel_id = \x27${pixel_id}\x27;\x0Afb_param.value = \x27${order_value}\x27;\x0Afb_param.currency = \x27${currency}\x27;",script:"",url:"connect.facebook.net/${countrycode}/fp.js",post:"",html:"",locationId:2,positionId:2,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{"-4077753":{token:"countrycode"},"-4077754":{token:"pixel_id"},"-4077755":{token:"order_value"},"-4077756":{token:"currency"}},dependencies:[18849924]},30510156:{id:"30510156",name:"Facebook Remarketing",scriptTimeout:5000,template:true,prePostWindowScope:true,disabled:false,dedupe:false,pre:"var fb_param = {};\x0Afb_param.pixel_id = \x27${pixel_id}\x27;\x0Afb_param.value = \x27${order_value}\x27;\x0Afb_param.currency = \x27${currency}\x27;",script:"",url:"connect.facebook.net/${countrycode}/fp.js",post:"",html:"",locationId:2,positionId:2,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{"-4077757":{token:"countrycode"},"-4077758":{token:"pixel_id"},"-4077759":{token:"order_value"},"-4077760":{token:"currency"}},dependencies:[]},34472545:{id:"34472545",name:"GTM container - CIS",scriptTimeout:5000,disabled:false,dedupe:false,pre:"",url:"",post:"",html:"<!-- Google Tag Manager -->\x0A<noscript><iframe src=\x22//www.googletagmanager.com/ns.html?id=GTM-5P64P3\x22\x0Aheight=\x220\x22 width=\x220\x22 style=\x22display:none;visibility:hidden\x22></iframe></noscript>\x0A<script>\x0AdataLayer = [];\x0A(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({\x27gtm.start\x27:\x0Anew Date().getTime(),event:\x27gtm.js\x27});var f=d.getElementsByTagName(s)[0],\x0Aj=d.createElement(s),dl=l!=\x27dataLayer\x27?\x27&l=\x27+l:\x27\x27;j.async=true;j.src=\x0A\x27//www.googletagmanager.com/gtm.js?id=\x27+i+dl;f.parentNode.insertBefore(j,f);\x0A})(window,document,\x27script\x27,\x27dataLayer\x27,\x27GTM-5P64P3\x27);\x0A<\/script>\x0A<!-- End Google Tag Manager -->\x0A",locationId:1,positionId:1,locationDetail:"",async:true,needsConsent:false,usesDocWrite:false,pageVars:{},dependencies:[]}};
var A=1;var v="pong.qubitproducts.com";var w="";var z=true;var o=300;var E={};try{E.filters=t}catch(B){}try{E.pageVars=D}catch(B){}try{E.scriptLoaders=y}catch(B){}try{E.delayDocWrite=z}catch(B){}try{E.qTagClientId=r}catch(B){}try{E.containerName=m}catch(B){}try{E.profileName=u}catch(B){}try{E.tellLoadTimesProbability=A}catch(B){}try{E.containerDisabled=C}catch(B){}try{E.maxCookieLength=o}catch(B){}try{E.pingServerUrl=v}catch(B){}try{E.qtag_track_session=p}catch(B){}try{E.qtag_domain=w}catch(B){}try{E.scriptURL=s}catch(B){}E.qtag_track_session=true;var q=f.Cookie;function F(){var G=false;if(q.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0){G=true}return G}function x(){var G=false;if(q.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0){G=true}return G}function n(){if(document.location.href.indexOf("opentag_disabled=true")>=0){return true}return false}var k=false;function j(G){if(n()){return}if(k){return}k=true;var L=false;var K=f.opentag;var H=x();var O=H||F();if(!L&&O){var N=document.createElement("script");var I;if(G.scriptURL){I=G.scriptURL;var M="-debug.js".length;if(I.lastIndexOf("-debug.js")!==I.length-M){I=I.substring(0,I.length-".js".length);I+="-debug.js"}}var J="//d3c3cq33003psk.cloudfront.net/opentag-"+G.qTagClientId+"-"+G.profileName+"-debug.js";if(I&&J!==I){N.src=I}else{N.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+G.qTagClientId+"-"+G.profileName+"-debug.js"}if(!K.Log){a.TAGSDK_NS_OVERRIDE=true}else{a.TAGSDK_NS_OVERRIDE=false}document.getElementsByTagName("head")[0].appendChild(N);return}if(K.Log){a.TAGSDK_NS_OVERRIDE=false}new f.opentag.OldTagRunner(G).run()}g.html.UVListener.init();j(E)})()}())}catch(e){try{if(window.debug){console.log(e)}}catch(ex){}};